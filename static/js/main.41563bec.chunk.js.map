{"version":3,"sources":["images/p1.png","images/p2.png","images/p1@2x.png","images/p2@2x.png","images/confirm.png","components/MessageInput.js","components/Checkbox.js","components/LegislatorSections.js","components/SpinningIcon.js","components/Divider.js","components/Notice.js","lib/useIntersectionObserver.js","components/StartButton.js","components/MessageTemplates.js","components/SendTypeSwitch.js","components/Jumbotron.js","components/Emphasis.js","SettingsPage.js","lib/useLegislatorContactData.js","lib/waitForFB.js","components/FacebookPagePlugin.js","components/LegislatorDisplay.js","components/ContactDisplay.js","components/buttons.js","components/FinishDisplay.js","components/CopyButton.js","components/SendPageTutorial.js","SendPage.js","components/FacebookEmbedPlugin.js","components/LikeTargetList.js","components/LikeTargetDateSelect.js","LikePage.js","lib/useLegislatorData.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","TextArea","styled","textarea","_templateObject","MessageInput","props","value","handleBlur","useCallback","window","ga","react_default","a","createElement","Object","assign","onBlur","Checkbox","_ref","_ref$isIndeterminate","isIndeterminate","objectWithoutProperties","type","ref","checkbox","indeterminate","defaultProps","Container","div","LegislatorSections_templateObject","CheckboxList","ul","_templateObject2","PositionCheckboxList","_templateObject3","Section","section","_templateObject4","useColumnTrueCheckbox","targetKey","legislators","selectedIdMap","onChange","targetedSelectedCount","useMemo","filter","legislator","id","length","targetedSelectedTotal","handleTargetedToggle","e","map","_ref2","_ref3","checked","PositionSelector","_ref4","_ref4$onChange","positionTotalMap","reduce","agg","_ref5","position","positionCountMap","_ref6","selectedCount","keys","handlePositionToggle","toggledPosition","target","_ref7","_ref8","_ref9","_ref10","handleAllToggle","_ref11","mutualLivingCheckboxProps","act760CheckboxProps","civilCheckboxProps","vote4CheckboxProps","style","fontWeight","color","components_Checkbox","key","href","rel","LegislatorSection","_ref12","_ref12$area","area","_ref12$legislators","_ref12$selectedIdMap","_ref12$onChange","_ref13","handleSectionToggle","newMap","objectSpread","forEach","_ref14","legislatorMap","_ref15","handleSingleToggle","selectedId","concat","_ref16","name","React","memo","_ref$legislators","_ref$selectedLegislat","selectedLegislatorIds","_ref$onSelectionChang","doneLegislatorMap","onSelectionChange","legislatorsByArea","areas","push","DURATION","flip","keyframes","SpinningIcon_templateObject","_ref$icons","icons","_useState","useState","_useState2","slicedToArray","idx","setIdx","iconCount","useEffect","handle","setTimeout","clearTimeout","role","aria-label","SpinningIcon_templateObject2","_ref$content","content","Divider_templateObject","Notice","Notice_templateObject","useIntersectionObserver","elemRef","onView","arguments","undefined","io","useRef","disconnect","current","useLayoutEffect","IntersectionObserver","observe","SECONDS_EACH_LEGISLATOR_FB","SECONDS_EACH_LEGISLATOR_TEL","BreakOnSmallScreen","br","StartButton_templateObject","onClick","_ref$show","show","className","_ref$sendType","sendType","hasStarted","legislatorToSendCount","totalSeconds","timeStr","Math","floor","ga-on","ga-event-category","ga-event-action","ga-event-label","ga-event-value","StartButton_templateObject2","messageTemplateData","TemplateOption","_ref$template","template","label","msg","_ref$onSelect","onSelect","handleClick","_ref2$onSelect","templates","setTemplates","then","t","bind","data","default","rows","data-label","MessageTemplates_templateObject","_ref$value","_ref$onChange","SendTypeSwitch_templateObject","Jumbotron","header","Jumbotron_templateObject","Emphasis","em","Emphasis_templateObject","PageContainer","SettingsPage_templateObject","Header","components_Jumbotron","components_SpinningIcon","components_Emphasis","Footer","footer","SettingsPage_templateObject2","SettingsPage","_ref$msg","_ref$onMsgChange","onMsgChange","_ref$doneLegislatorMa","_ref$onSendTypeChange","onSendTypeChange","_ref$onSubmit","onSubmit","selectionSectionRef","isSelectionInView","setSelectionInView","handleNextClick","scrollIntoView","behavior","block","handleSelectionIntersect","entries","isIntersecting","handleMessageAdd","selectedMsg","components_Divider","components_SendTypeSwitch","components_Notice","marginLeft","marginRight","components_MessageTemplates","components_MessageInput","autoFocus","display","justifyContent","margin","fontSize","opacity","process","flexShrink","components_LegislatorSections","components_StartButton","storedContactMapGetter","getNameHash","slice","replace","useLegislatorContactData","getContactByName","setContactMapGetter","contacts","fbPromise","FB","Promise","resolve","fbAsyncInit","init","version","DEFAULT_TABS","Cover","FacebookPagePlugin_templateObject","_ref$className","_ref$tabs","tabs","_ref$href","_ref$width","width","_ref$height","height","_ref$onParsed","onParsed","_ref$profile","profile","_ref$canLoad","canLoad","fbRoot","waitForFB","XFBML","parse","data-href","data-tabs","join","data-small-header","data-adapt-container-width","data-show-facepile","data-hide-cta","data-width","data-height","Fragment","LegislatorData","article","LegislatorDisplay_templateObject","LegislatorDisplay_templateObject2","LegislatorDisplay","_ref$legislator","pridewatchpage","description","party","religion","subarea","facebookpage","overflowX","padding","split","desc","LegislatorDisplay_Footer","marginBottom","_ref$contacts","phone","address","ContactDisplay_templateObject","Button","button","buttons_templateObject","BorderedButton","buttons_templateObject2","FinishDisplay_templateObject","FinishDisplay","onBack","FinishDisplay_Container","CopyButton","onCopy","text","copyBtnRef","clipboardInstance","destroy","ClipboardJS","on","cogoToast","success","Backdrop","SendPageTutorial_templateObject","Outside","SendPageTutorial_templateObject2","Dialog","SendPageTutorial_templateObject3","StartButton","SendPageTutorial_templateObject4","TeacherIcon","_templateObject5","SendPageTutorial","dismissed","setDismissed","handleToggle","s","alt","src","require","srcset","SendPageTutorial_StartButton","SendPage_templateObject","HeaderProgress","SendPage_templateObject2","Back","SendPage_templateObject3","SendPage_templateObject4","NextButton","shouldForwardProp","SendPage_templateObject5","PluginWrapper","_templateObject6","Hint","_templateObject7","SendPage","_ref$currentIdx","currentIdx","selectedLegislators","_ref$onNext","onPrev","onNext","_ref$onBack","submitStepRef","pluginHeight","setPluginHeight","handleNext","handleCopy","scrollTo","components_FinishDisplay","_selectedLegislators$","facebookprofile","cannotload","components_SendPageTutorial","SendPage_Header","toFixed","SendPage_Container","components_LegislatorDisplay","flex","placeholder","components_CopyButton","flexBasis","index_esm","components_FacebookPagePlugin","components_ContactDisplay","getUrl","_id$split","_id$split2","postId","commentId","_id$split3","_id$split4","pageId","visitorPostId","Error","_ref$id","_ref$type","FacebookEmbedPlugin_templateObject","TARGET_PER_SECTION","PLACEHOLDER_HEIGHT_PER_TARGET","LikeTargetList_templateObject","sendLikeShowEvent","sendReport","confirm","Rollbar","info","alert","LikeTargetSection","_ref$likeTargets","likeTargets","_ref$onVisible","onVisible","sectionRef","handleView","react","components_FacebookEmbedPlugin","LikeTargetList_Footer","LikeTargetList","showIdx","setShowIdx","likeTargetSections","sections","likeTarget","lastSection","handleSectionVisible","likeTargetsByDate","handleChange","date","toLocaleDateString","LikeTargetDateSelect_templateObject","sortByDateThenLen","dateLeft","lenLeft","len","dateRight","lenRight","setLikeTargetsByDate","_useState3","_useState4","dateIdx","setDateIdx","topRef","createdtime","row","Date","sort","grouped","lastGroup","convertRowsToLikeTargetsByDate","currentLikeTargets","currentDate","nextTargetCount","components_LikeTargetDateSelect","components_LikeTargetList","LikePage_templateObject","legislatorData","useLegislatorData","setLegislators","POSITION_ORDER","未表態","反對同婚","支持專法","支持同婚","DEFAULT_SEND_TYPE","DEFAULT_FB_MESSAGE","DEFAULT_TEL_MESSAGE","DEFAULT_PAGE","location","hash","App","_useLegislatorData","_useLegislatorData2","page","setPage","setMsg","_useState5","_useState6","setLegislatorIds","_useState7","_useState8","setLegislatorDone","_useState9","_useState10","setSendType","findIndex","handleSelectionChange","aId","bId","aPos","bPos","handleSendTypeChange","newSendType","trim","handleSettingsSubmit","handleBackToSettings","defineProperty","src_SettingsPage","src_SendPage","src_LikePage","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.41563bec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/p1.f483f6b2.png\";","module.exports = __webpack_public_path__ + \"static/media/p2.a450dbf4.png\";","module.exports = __webpack_public_path__ + \"static/media/p1@2x.eb6440ec.png\";","module.exports = __webpack_public_path__ + \"static/media/p2@2x.28488ac9.png\";","module.exports = \"data:image/png;base64,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\"","import React, { useCallback } from 'react';\nimport styled from '@emotion/styled';\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  border-radius: 8px;\n  padding: 8px;\n  border: 2px solid currentColor;\n  background-color: rgba(255, 255, 255, 0.12);\n  color: #ff9753;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.22);\n  }\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.2);\n    outline: 0;\n  }\n`;\n\nfunction MessageInput(props) {\n  const { value } = props;\n\n  const handleBlur = useCallback(() => {\n    window.ga('set', 'dimension1', value); // message\n  }, [value]);\n\n  return <TextArea {...props} onBlur={handleBlur} />;\n}\n\nexport default MessageInput;\n","import React from 'react';\n\n// https://github.com/facebook/react/issues/1798#issuecomment-417047897\nfunction Checkbox({ isIndeterminate = false, ...props }) {\n  const setCheckboxRef = checkbox => {\n    if (checkbox) {\n      checkbox.indeterminate = isIndeterminate;\n    }\n  };\n\n  return <input type=\"checkbox\" ref={setCheckboxRef} {...props} />;\n}\n\nCheckbox.defaultProps = {\n  isIndeterminate: false,\n};\n\nexport default Checkbox;\n","import React, { useMemo, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport Checkbox from './Checkbox';\n\nconst Container = styled.div`\n  li {\n    display: inline-block;\n    padding-right: 2em;\n  }\n\n  label {\n    min-width: 105px;\n  }\n\n  input {\n    margin-right: 0.5em;\n  }\n`;\n\nconst CheckboxList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst PositionCheckboxList = styled(CheckboxList)`\n  background: rgba(0, 0, 0, 0.2);\n  padding: 16px 24px;\n  border-radius: 8px;\n`;\n\nconst Section = styled.section`\n  margin: 40px 0;\n  header {\n    font-size: 20px;\n    border-bottom: 2px dotted rgba(255, 255, 255, 0.12);\n    label {\n      padding: 8px 0;\n    }\n  }\n`;\n\n/**\n * Section of all legislators and controls\n *\n * @param {Object[]} props.legislators\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorMap - id to true map\n * @param {function} props.onSelectionChange\n */\nfunction LegislatorSections({\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorMap = {},\n  onSelectionChange = () => {},\n}) {\n  const legislatorsByArea = useMemo(\n    () =>\n      legislators.reduce((areas, legislator) => {\n        areas[legislator.area] = areas[legislator.area] || [];\n        areas[legislator.area].push(legislator);\n        return areas;\n      }, {}),\n    [legislators]\n  );\n\n  const selectedIdMap = useMemo(\n    () =>\n      selectedLegislatorIds.reduce((agg, id) => {\n        agg[id] = true;\n        return agg;\n      }, {}),\n    [selectedLegislatorIds]\n  );\n\n  return (\n    <Container>\n      <PositionSelector\n        legislators={legislators}\n        selectedIdMap={selectedIdMap}\n        onChange={onSelectionChange}\n      />\n      {Object.keys(legislatorsByArea).map(area => (\n        <LegislatorSection\n          key={area}\n          area={area}\n          selectedIdMap={selectedIdMap}\n          legislators={legislatorsByArea[area]}\n          onChange={onSelectionChange}\n        />\n      ))}\n    </Container>\n  );\n}\n\n/**\n * Logic of selecting legislators with a specific spreadsheet column being true\n *\n * @param {string} targetKey - the column name to look up\n * @param {object[]} legislators\n * @param {object} selectedIdMap\n * @param {function} onChange - callback to call when checkbox is checked\n * @returns {object} checkboxProps - When checked, all legislators with the column being true will be selected/deselected\n */\nfunction useColumnTrueCheckbox(\n  targetKey,\n  legislators,\n  selectedIdMap,\n  onChange\n) {\n  const targetedSelectedCount = useMemo(\n    () =>\n      legislators.filter(\n        legislator => legislator[targetKey] && selectedIdMap[legislator.id]\n      ).length,\n    [legislators, selectedIdMap, targetKey]\n  );\n  const targetedSelectedTotal = useMemo(\n    () => legislators.filter(legislator => legislator[targetKey]).length,\n    [legislators, targetKey]\n  );\n\n  const handleTargetedToggle = useCallback(\n    e => {\n      if (targetedSelectedCount === 0) {\n        // select all in platform\n        onChange(\n          legislators\n            .filter(\n              legislator =>\n                legislator[targetKey] || selectedIdMap[legislator.id]\n            )\n            .map(({ id }) => id)\n        );\n      } else {\n        // deselect all\n        onChange(\n          legislators\n            .filter(\n              legislator =>\n                !legislator[targetKey] && selectedIdMap[legislator.id]\n            )\n            .map(({ id }) => id)\n        );\n      }\n    },\n    [legislators, onChange, selectedIdMap, targetKey, targetedSelectedCount]\n  );\n\n  return useMemo(\n    () => ({\n      onChange: handleTargetedToggle,\n      checked: targetedSelectedCount === targetedSelectedTotal,\n      isIndeterminate:\n        0 < targetedSelectedCount &&\n        targetedSelectedCount < targetedSelectedTotal,\n    }),\n    [targetedSelectedCount, targetedSelectedTotal, handleTargetedToggle]\n  );\n}\n\nfunction PositionSelector({ legislators, selectedIdMap, onChange = () => {} }) {\n  // position to total map\n  const positionTotalMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        agg[position] += 1;\n\n        return agg;\n      }, {}),\n    [legislators]\n  );\n\n  // position to count map\n  const positionCountMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        if (selectedIdMap[id]) {\n          agg[position] += 1;\n        }\n        return agg;\n      }, {}),\n    [legislators, selectedIdMap]\n  );\n\n  const selectedCount = Object.keys(selectedIdMap).length;\n\n  const handlePositionToggle = useCallback(\n    e => {\n      const toggledPosition = e.target.value;\n\n      if (positionCountMap[toggledPosition] === 0) {\n        // select all in platform\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position === toggledPosition || selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      } else {\n        // deselect all\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position !== toggledPosition && selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      }\n    },\n    [positionCountMap, legislators, onChange, selectedIdMap]\n  );\n\n  const handleAllToggle = useCallback(() => {\n    if (selectedCount === 0) {\n      onChange(legislators.map(({ id }) => id));\n    } else {\n      onChange([]);\n    }\n  }, [selectedCount, onChange, legislators]);\n\n  const mutualLivingCheckboxProps = useColumnTrueCheckbox(\n    'signedmutualliving',\n    legislators,\n    selectedIdMap,\n    onChange\n  );\n  const act760CheckboxProps = useColumnTrueCheckbox(\n    'signed760',\n    legislators,\n    selectedIdMap,\n    onChange\n  );\n  const civilCheckboxProps = useColumnTrueCheckbox(\n    'signed10',\n    legislators,\n    selectedIdMap,\n    onChange\n  );\n  const vote4CheckboxProps = useColumnTrueCheckbox(\n    'vote4',\n    legislators,\n    selectedIdMap,\n    onChange\n  );\n\n  return (\n    <PositionCheckboxList>\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox\n            onChange={handleAllToggle}\n            checked={selectedCount === legislators.length}\n            isIndeterminate={\n              0 < selectedCount && selectedCount < legislators.length\n            }\n          />\n          全選\n        </label>\n      </li>\n      {Object.keys(positionTotalMap).map(p => (\n        <li key={p}>\n          <label>\n            <Checkbox\n              value={p}\n              onChange={handlePositionToggle}\n              checked={positionCountMap[p] === positionTotalMap[p]}\n              isIndeterminate={\n                0 < positionCountMap[p] &&\n                positionCountMap[p] < positionTotalMap[p]\n              }\n            />{' '}\n            {p}\n          </label>\n        </li>\n      ))}\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox {...mutualLivingCheckboxProps} />\n          連署\n        </label>\n        <a\n          href=\"https://www.facebook.com/TaiwanHotline/photos/a.323404934262/10156467464324263/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          12 案施行法(賴士葆)\n        </a>\n      </li>\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox {...act760CheckboxProps} />\n          連署\n        </label>\n        <a\n          href=\"https://www.storm.mg/article/1242192\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          748+12 施行法(林岱樺)\n        </a>\n      </li>\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox {...civilCheckboxProps} />\n          連署\n        </label>\n        <a\n          href=\"https://www.upmedia.mg/news_info.php?SerialNo=61646\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          民法婚姻一男一女(黃昭順)\n        </a>\n      </li>\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox {...vote4CheckboxProps} />\n          表決贊成\n        </label>\n        <a\n          href=\"https://www.setn.com/News.aspx?NewsID=542496\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          748施行法\n        </a>\n      </li>\n    </PositionCheckboxList>\n  );\n}\n\n/**\n * Legislator control of one section area\n *\n * @param {string} props.area - Legislator section area\n * @param {object[]} props.legislators - legislators of this section\n * @param {object} props.selectedIdMap\n * @param {function} props.onChange\n */\nfunction LegislatorSection({\n  area = '',\n  legislators = [],\n  selectedIdMap = {},\n  onChange = () => {},\n}) {\n  const selectedCount = legislators.filter(({ id }) => selectedIdMap[id])\n    .length;\n\n  const handleSectionToggle = useCallback(\n    e => {\n      if (selectedCount === 0) {\n        // Select all in section\n        const newMap = { ...selectedIdMap };\n        legislators.forEach(({ id }) => {\n          newMap[id] = true;\n        });\n\n        onChange(Object.keys(newMap));\n      } else {\n        const legislatorMap = legislators.reduce((agg, { id }) => {\n          agg[id] = true;\n          return agg;\n        }, {});\n        // deselect all in legislators\n        onChange(Object.keys(selectedIdMap).filter(id => !legislatorMap[id]));\n      }\n    },\n    [legislators, onChange, selectedCount, selectedIdMap]\n  );\n\n  const handleSingleToggle = useCallback(\n    e => {\n      const selectedId = e.target.value;\n\n      if (selectedIdMap[selectedId]) {\n        // Deselect this\n        onChange(Object.keys(selectedIdMap).filter(id => id !== selectedId));\n      } else {\n        // Select this\n        onChange(Object.keys(selectedIdMap).concat(selectedId));\n      }\n    },\n    [selectedIdMap, onChange]\n  );\n\n  return (\n    <Section>\n      <header>\n        <label>\n          <Checkbox\n            onChange={handleSectionToggle}\n            isIndeterminate={\n              0 < selectedCount && selectedCount < legislators.length\n            }\n            checked={selectedCount === legislators.length}\n          />{' '}\n          {area}\n        </label>\n      </header>\n      <CheckboxList>\n        {legislators.map(({ id, name }) => (\n          <li key={id}>\n            <label>\n              <Checkbox\n                key={id}\n                value={id}\n                onChange={handleSingleToggle}\n                checked={!!selectedIdMap[id]}\n              />{' '}\n              {name}\n            </label>\n          </li>\n        ))}\n      </CheckboxList>\n    </Section>\n  );\n}\n\nexport default React.memo(LegislatorSections);\n","import React, { useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/core';\n\nconst DURATION = 1; // seconds\n\nfunction SpinningIcon({ icons = [], ...props }) {\n  const [idx, setIdx] = useState(0);\n  const iconCount = icons.length;\n\n  useEffect(() => {\n    const handle = setTimeout(() => {\n      setIdx((idx + 1) % iconCount);\n    }, DURATION * 1000);\n\n    return () => clearTimeout(handle);\n  }, [idx, iconCount]);\n\n  return (\n    <span\n      key={idx}\n      /* Change key to force trigger the 1-time animation */\n      role=\"img\"\n      aria-label=\"Icon\"\n      {...props}\n    >\n      {icons[idx]}\n    </span>\n  );\n}\n\nconst flip = keyframes`\n  from {\n    transform: perspective(400px) rotateY(90deg);\n  }\n\n  to {\n    transform: perspective(400px) rotateY(-90deg);\n  }\n`;\n\nexport default styled(SpinningIcon)`\n  /*\n    Can't use emojis that is too large on mobile:\n    https://stackoverflow.com/questions/29142118/why-do-emoji-not-render-above-a-certain-size-in-chrome\n  */\n  font-size: 60px;\n  line-height: 1;\n  display: inline-block;\n  transform: perspective(400px) rotateY(90deg);\n  animation: ${flip} 1s cubic-bezier(0, 0.37, 1, 0.63); /* no infinite here, use DOM change to trigger animation */\n\n  @media screen and (min-width: 1024px) {\n    font-size: 84px;\n  }\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction Divider({ content = '👨‍👨‍👧‍👦👨‍👩‍👧‍👦👩‍👩‍👧‍👦', ...props }) {\n  return (\n    <p {...props}>\n      <span role=\"img\" aria-label=\"Horizontal ruler\">\n        {content}\n      </span>\n    </p>\n  );\n}\n\nexport default styled(Divider)`\n  margin: 40px 0;\n  text-align: center;\n  letter-spacing: 0.5em;\n`;\n","import styled from '@emotion/styled';\n\nconst Notice = styled.div`\n  color: #8f53ff;\n  margin: 16px;\n  padding: 16px;\n  border: 2px solid currentColor;\n  border-radius: 3px;\n`;\n\nexport default Notice;\n","import 'intersection-observer'; // polyfill\nimport { useRef, useLayoutEffect } from 'react';\n\nfunction useIntersectionObserver(elemRef, onView = () => {}) {\n  const io = useRef(null);\n  function disconnect() {\n    if (io.current) {\n      io.current.disconnect();\n    }\n  }\n  useLayoutEffect(() => {\n    disconnect();\n    if (elemRef.current) {\n      io.current = new IntersectionObserver(onView, {});\n      io.current.observe(elemRef.current);\n    }\n    return disconnect;\n  }, [elemRef, onView]);\n\n  return disconnect;\n}\n\nexport default useIntersectionObserver;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst SECONDS_EACH_LEGISLATOR_FB = 20;\nconst SECONDS_EACH_LEGISLATOR_TEL = 300;\n\nconst BreakOnSmallScreen = styled.br`\n  @media screen and (min-width: 425px) {\n    display: none;\n  }\n`;\n\n/**\n * Start sending button on settings page\n *\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorMap - id to true map\n * @param {function} props.onClick\n * @param {boolean} props.show - whether to show this button\n */\nfunction StartButton({\n  doneLegislatorMap,\n  selectedLegislatorIds,\n  onClick,\n  show = false,\n  className,\n  sendType = '',\n}) {\n  const hasStarted = Object.keys(doneLegislatorMap).length > 0;\n  const legislatorToSendCount = selectedLegislatorIds.filter(\n    id => !doneLegislatorMap[id]\n  ).length;\n  const secondsEachLegislator =\n    sendType === 'fb'\n      ? SECONDS_EACH_LEGISLATOR_FB\n      : SECONDS_EACH_LEGISLATOR_TEL;\n\n  const totalSeconds = secondsEachLegislator * legislatorToSendCount;\n  const timeStr =\n    totalSeconds > 120\n      ? ` ${Math.floor(totalSeconds / 60)} 分鐘`\n      : ` ${totalSeconds} 秒`;\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`${className} ${\n        show && legislatorToSendCount > 0 ? 'show' : ''\n      }`}\n      ga-on=\"click\"\n      ga-event-category=\"send\"\n      ga-event-action=\"start\"\n      ga-event-label={hasStarted ? '繼續' : '開始'}\n      ga-event-value={legislatorToSendCount}\n    >\n      <span>\n        {hasStarted ? '繼續' : '開始'}向 {legislatorToSendCount} 位委員陳情{' '}\n        <BreakOnSmallScreen />\n        <small> (約需 {timeStr}) </small>\n      </span>\n    </button>\n  );\n}\n\nexport default styled(StartButton)`\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 24px;\n\n  transform: translate(0, 100%);\n  transition: transform 0.2s ease-out, background-color 0.2s;\n\n  font-size: 20px;\n  font-weight: bold;\n  border-radius: 0;\n\n  & > span {\n    margin: 0 auto;\n  }\n\n  &::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n\n  &.show {\n    transform: translate(0, 0);\n  }\n`;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\n\n// shared storage of legislators\nlet messageTemplateData = null;\n\nfunction TemplateOption({ template: { label, msg }, onSelect = () => {} }) {\n  const handleClick = useCallback(() => {\n    onSelect(msg);\n  }, [msg, onSelect]);\n\n  return <li onClick={handleClick}>{label}</li>;\n}\n\nfunction MessageTemplates({ onSelect = () => {}, ...props }) {\n  const [templates, setTemplates] = useState(messageTemplateData);\n\n  useEffect(() => {\n    if (templates) return;\n\n    import('data/messageTemplates.json').then(data =>\n      setTemplates((messageTemplateData = data.default.rows))\n    );\n  }, [templates]);\n\n  if (!templates) return null;\n\n  return (\n    <ul data-label=\"加點內容：\" {...props}>\n      {templates.map((template, idx) => (\n        <TemplateOption key={idx} template={template} onSelect={onSelect} />\n      ))}\n    </ul>\n  );\n}\n\nexport default styled(MessageTemplates)`\n  list-style: none;\n  margin: 0 0 8px;\n  padding: 0;\n\n  &::before {\n    content: attr(data-label);\n  }\n\n  li {\n    display: inline-block;\n    padding: 4px 6px;\n    margin: 0 0 4px 4px;\n    font-size: 12px;\n    border-radius: 30px;\n    border: 1px solid currentColor;\n    color: #ff5368;\n    transition-property: color, background-color;\n    transition-duration: 0.2s;\n\n    &:hover {\n      background-color: #ff5368;\n      color: #fff;\n    }\n  }\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction SendTypeSwitch({ value = '', onChange = () => {}, ...props }) {\n  return (\n    <ul {...props}>\n      <li\n        className={value === 'fb' ? 'selected' : ''}\n        onClick={() => onChange('fb')}\n      >\n        <h4>\n          FB 粉專{' '}\n          <span role=\"img\" aria-label=\"\">\n            💬\n          </span>\n        </h4>\n        <p>\n          <span role=\"img\" aria-label=\"優點\">\n            👍\n          </span>{' '}\n          方便快速、通勤時也能陳情！委員偶爾會親自閱讀\n        </p>\n        <p>\n          <span role=\"img\" aria-label=\"缺點\">\n            👎\n          </span>{' '}\n          回覆比例低、存在感低\n        </p>\n      </li>\n      <li\n        className={value === 'tel' ? 'selected' : ''}\n        onClick={() => onChange('tel')}\n      >\n        <h4>\n          電話{' '}\n          <span role=\"img\" aria-label=\"\">\n            📞\n          </span>\n        </h4>\n        <p>\n          <span role=\"img\" aria-label=\"優點\">\n            👍\n          </span>{' '}\n          專人傾聽，多人陳情時很有感\n        </p>\n        <p>\n          <span role=\"img\" aria-label=\"缺點\">\n            👎\n          </span>{' '}\n          花時間、接電話的助理不一定會轉達\n        </p>\n      </li>\n    </ul>\n  );\n}\n\nexport default styled(SendTypeSwitch)`\n  list-style: none;\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  padding: 0;\n\n  h4 {\n    margin: 0 0 0.5em;\n  }\n\n  li {\n    padding: 16px;\n    flex: 1 1 0;\n    max-width: 240px;\n\n    border: 2px solid #ff9753;\n    border-left-width: 0;\n    border-right-width: 0;\n\n    color: #ff9753;\n    cursor: pointer;\n\n    &.selected {\n      background: #ff9753;\n      color: #fff;\n    }\n  }\n\n  li:first-of-type {\n    border-left-width: 2px;\n    border-top-left-radius: 8px;\n    border-bottom-left-radius: 8px;\n  }\n\n  li:last-of-type {\n    border-right-width: 2px;\n    border-top-right-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n\n  p {\n    font-size: 12px;\n    margin: 0;\n  }\n`;\n","import styled from '@emotion/styled';\n\nconst Jumbotron = styled.header`\n  text-align: center;\n  padding: 30px 0;\n\n  h1 {\n    font-size: 28px;\n    font-weight: normal;\n    letter-spacing: 0.125em;\n    margin: 24px 0 16px;\n    @media screen and (min-width: 425px) {\n      font-size: 40px;\n    }\n  }\n\n  h2 {\n    margin: 0;\n    font-size: 14px;\n    letter-spacing: 0.5em;\n    font-weight: 200;\n  }\n`;\n\nexport default Jumbotron;\n","import styled from '@emotion/styled';\n\nconst Emphasis = styled.em`\n  color: #8f53ff;\n  font-style: normal;\n`;\n\nexport default Emphasis;\n","import React, { useRef, useCallback, useState } from 'react';\nimport styled from '@emotion/styled';\n\nimport MessageInput from './components/MessageInput';\nimport LegislatorSections from './components/LegislatorSections';\nimport SpinningIcon from './components/SpinningIcon';\nimport Divider from './components/Divider';\nimport Notice from './components/Notice';\n\nimport useIntersectionObserver from './lib/useIntersectionObserver';\nimport StartButton from './components/StartButton';\nimport MessageTemplates from './components/MessageTemplates';\nimport SendTypeSwitch from './components/SendTypeSwitch';\nimport Jumbotron from './components/Jumbotron';\nimport Emphasis from './components/Emphasis';\n\nconst PageContainer = styled.div`\n  padding: 40px;\n  max-width: 720px;\n  margin: 0 auto;\n`;\n\nconst Header = React.memo(() => (\n  <Jumbotron>\n    <SpinningIcon icons={['🏠', '👨‍👨‍👧‍👦', '🏠', '👩‍👩‍👧‍👦', '🏠', '👨‍👩‍👧‍👦']} />\n    <h1>\n      我<Emphasis>愛家</Emphasis>・我聯絡\n    </h1>\n    <h2>平權立院鍵盤陳情</h2>\n  </Jumbotron>\n));\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  padding-bottom: 64px;\n`;\n\nfunction SettingsPage({\n  msg = '',\n  onMsgChange = () => {},\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorMap = {},\n  onSelectionChange = () => {},\n  sendType = '',\n  onSendTypeChange = () => {},\n  onSubmit = () => {},\n}) {\n  const selectionSectionRef = useRef(null);\n  const [isSelectionInView, setSelectionInView] = useState(false);\n\n  const handleNextClick = useCallback(\n    () =>\n      selectionSectionRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      }),\n    [selectionSectionRef]\n  );\n\n  const handleSelectionIntersect = useCallback(\n    entries => {\n      if (entries[0].isIntersecting) {\n        setSelectionInView(true);\n      } else {\n        setSelectionInView(false);\n      }\n    },\n    [setSelectionInView]\n  );\n\n  const handleMessageAdd = useCallback(\n    selectedMsg => {\n      onMsgChange(`${msg}\\n\\n${selectedMsg}`);\n    },\n    [msg, onMsgChange]\n  );\n\n  useIntersectionObserver(selectionSectionRef, handleSelectionIntersect);\n\n  return (\n    <PageContainer>\n      <Header />\n      <section>\n        <p>\n          讓同志能以<Emphasis>婚姻</Emphasis>成家，就是「愛家」的表現。\n          在平權法案通過之前，讓我們動動手指頭，不分異同地向立法委員們表達我們\n          <Emphasis>希望讓同志可以結婚</Emphasis>的心聲吧！\n        </p>\n        <Divider />\n        <h3>你想要怎麼陳情？</h3>\n        <SendTypeSwitch value={sendType} onChange={onSendTypeChange} />\n        {sendType === 'tel' && (\n          <Notice style={{ marginLeft: 0, marginRight: 0 }}>\n            請在公務人員的上班時間撥打。若為午休時間（12:00~13:30），可以加句「不好意思打擾您午休」。\n          </Notice>\n        )}\n\n        <label>\n          <h3>你想要跟委員們說什麼呢？</h3>\n          <MessageTemplates onSelect={handleMessageAdd} />\n          <MessageInput\n            value={msg}\n            onChange={e => onMsgChange(e.target.value)}\n            rows={5}\n            autoFocus\n          />\n        </label>\n        <p\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            margin: 0,\n          }}\n        >\n          <span style={{ fontSize: 12, opacity: 0.88 }}>\n            ＊ 不知如何下筆？參考\n            <a\n              href={process.env.REACT_APP_REFERENCE_URL}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              這些範例\n            </a>\n            ，加入你的個人背景與觀察（如：有同事是同志），會更有說服力唷！\n          </span>\n          <button\n            style={{ flexShrink: 0, marginLeft: '8px' }}\n            type=\"button\"\n            onClick={handleNextClick}\n          >\n            下一步\n          </button>\n        </p>\n      </section>\n\n      <section ref={selectionSectionRef}>\n        <Divider />\n        <h3>請選擇要陳情的立委</h3>\n        <LegislatorSections\n          legislators={legislators || []}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorMap={doneLegislatorMap}\n          onSelectionChange={onSelectionChange}\n        />\n        <StartButton\n          show={isSelectionInView}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorMap={doneLegislatorMap}\n          onClick={onSubmit}\n          sendType={sendType}\n        />\n      </section>\n      <Footer>\n        <Divider content=\"🏳️‍🌈\" />\n\n        <p>\n          此工具為\n          <a href=\"https://www.facebook.com/groups/answerfamily/\">\n            《我愛家我解惑 - 平權社會對話工程》社群\n          </a>\n          參與者提供之\n          <a href=\"https://github.com/answerfamily/ly\">開放原始碼</a>\n          專案。若有任何問題或建議，請來信至{' '}\n          <a href=\"mailto:cofacts@googlegroups.com\">Cofacts 聯絡信箱</a>。\n        </p>\n\n        <p>\n          資料來源：\n          <a\n            href=\"http://equallove.tw/articles/200\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            婚姻平權大平台委員 FB 名冊\n          </a>\n          、\n          <a\n            href=\"https://www.pridewatch.tw/beta/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            PrideWatch Taiwan 同志人權立場觀測站\n          </a>\n          、\n          <a\n            href=\"https://github.com/g0v/ly-tel\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            g0v 立委聯絡資訊專案\n          </a>\n        </p>\n\n        <p>\n          Background icons:{' '}\n          <a\n            href=\"https://thenounproject.com/nookfulloption/collection/space2\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Space2\n          </a>{' '}\n          by Nook Fulloption from the Noun Project\n        </p>\n      </Footer>\n    </PageContainer>\n  );\n}\n\nexport default SettingsPage;\n","import { useState, useEffect } from 'react';\n\n// shared storage of legislators\nlet storedContactMapGetter = null;\n\nfunction getNameHash(name) {\n  return name.slice(0, 3).replace(/[．‧]/g, '');\n}\n\n/**\n * @returns {[object[], object]} legislator name to contact map\n */\nfunction useLegislatorContactData() {\n  const [getContactByName, setContactMapGetter] = useState(\n    storedContactMapGetter\n  );\n\n  useEffect(() => {\n    if (getContactByName) return;\n\n    import('data/ly-tel.json').then(data => {\n      const map = (data.default || []).reduce((agg, { name, contacts }) => {\n        agg[getNameHash(name)] = contacts;\n        return agg;\n      }, {});\n\n      setContactMapGetter(\n        // Cannot directly return getter function, it will be regarded as \"functional update\"\n        // Ref: https://reactjs.org/docs/hooks-reference.html#functional-updates\n        //\n        () =>\n          (storedContactMapGetter = function getContact(name = '') {\n            return map[getNameHash(name)];\n          })\n      );\n    });\n  }, [getContactByName]);\n\n  return getContactByName;\n}\n\nexport default useLegislatorContactData;\n","const fbPromise = (window.FB\n  ? Promise.resolve(window.FB)\n  : new Promise(resolve => {\n      window.fbAsyncInit = () => {\n        resolve();\n      };\n    })\n).then(() => {\n  window.FB.init({\n    // appId: process.env.REACT_APP_FB_ID,\n    version: 'v3.2',\n  });\n});\n\nexport default fbPromise;\n","import React, { useLayoutEffect, useRef } from 'react';\nimport styled from '@emotion/styled';\n\nimport waitForFB from 'lib/waitForFB';\n\nconst DEFAULT_TABS = ['timeline', 'messages'];\n\nconst Cover = styled.div`\n  background: #ff9753;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  text-align: center;\n`;\n\nfunction FacebookPagePlugin({\n  className = '',\n  tabs = DEFAULT_TABS,\n  href = '',\n  width = 320,\n  height = 500,\n  onParsed = null, // callback on layout being parsed\n  profile = '',\n  canLoad = true,\n}) {\n  const fbRoot = useRef(null);\n\n  useLayoutEffect(() => {\n    waitForFB.then(() => {\n      window.FB.XFBML.parse(fbRoot.current, () => {\n        if (onParsed) {\n          onParsed({ width, height });\n        }\n      });\n    });\n  }, [tabs, href, width, height, onParsed]);\n\n  if (!canLoad || !href) {\n    return (\n      <Cover className={className} style={{ width, height }}>\n        <p>無法在這裏顯示這位委員的粉絲專頁。</p>\n\n        {profile || href ? (\n          <p>\n            請手動點擊下面網址來陳情：\n            <br />\n            {href ? (\n              <>\n                <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n                  委員的粉絲專頁\n                </a>\n                <br />\n              </>\n            ) : null}\n            {profile ? (\n              <a href={profile} target=\"_blank\" rel=\"noopener noreferrer\">\n                委員的個人檔案\n              </a>\n            ) : null}\n          </p>\n        ) : (\n          <p>請直接下一位。</p>\n        )}\n      </Cover>\n    );\n  }\n\n  return (\n    <div ref={fbRoot} className={className}>\n      <div\n        className=\"fb-page\"\n        data-href={href}\n        data-tabs={tabs.join(',')}\n        data-small-header=\"true\"\n        data-adapt-container-width=\"false\"\n        data-show-facepile=\"false\"\n        data-hide-cta=\"true\"\n        data-width={width}\n        data-height={height}\n      />\n    </div>\n  );\n}\n\nexport default React.memo(FacebookPagePlugin);\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport Divider from 'components/Divider';\n\nconst LegislatorData = styled.article`\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n\n  /* hiding scrollbar */\n  padding-right: 20px;\n  margin-right: -20px;\n\n  /* gradient appear & disappear */\n  mask-image: linear-gradient(\n    to bottom,\n    transparent,\n    black 6%,\n    black 94%,\n    transparent\n  );\n`;\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  opacity: 0.88;\n`;\n\nfunction LegislatorDisplay({\n  legislator: {\n    name,\n    pridewatchpage,\n    position,\n    description,\n    party,\n    area,\n    religion,\n    subarea,\n    facebookpage,\n  },\n}) {\n  return (\n    <section\n      style={{\n        /* hiding scrollbar of LegislatorData */\n        overflowX: 'hidden',\n      }}\n    >\n      <h1>{name}</h1>\n      <LegislatorData>\n        <p>{position}</p>\n        {description ? (\n          <ul style={{ padding: 0 }}>\n            {description.split('\\n').map((desc, idx) => (\n              <li key={idx}>{desc}</li>\n            ))}\n          </ul>\n        ) : null}\n        <p>\n          {party}・{area}\n          {subarea ? `／${subarea}` : null}\n        </p>\n        {religion ? <p>{religion}</p> : null}\n        <p>\n          <a href={pridewatchpage} target=\"_blank\" rel=\"noopener noreferrer\">\n            PrideWatch 頁面\n          </a>\n        </p>\n      </LegislatorData>\n      <Footer>\n        <Divider />\n        <p style={{ marginBottom: 0 }}>\n          資料來源：\n          <a\n            href=\"http://equallove.tw/articles/200\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            婚姻平權大平台委員 FB 名冊\n          </a>\n          、\n          <a\n            href=\"https://www.pridewatch.tw/beta/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            PrideWatch Taiwan 同志人權立場觀測站\n          </a>\n          、\n          <a\n            href=\"https://github.com/g0v/ly-tel\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            g0v 立委聯絡資訊專案\n          </a>\n        </p>\n      </Footer>\n    </section>\n  );\n}\n\nexport default LegislatorDisplay;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction ContactDisplay({ contacts = [], ...props }) {\n  return (\n    <ul {...props}>\n      {contacts.map(({ name, phone, address }, idx) => (\n        <li key={idx}>\n          <h4>{name}</h4>\n          <p>\n            <a href={`tel:${phone}`}>{phone}</a>\n          </p>\n          <small>{address}</small>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default styled(ContactDisplay)`\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n  h4 {\n    margin: 0;\n  }\n  p {\n    margin: 0;\n  }\n  a {\n    font-weight: bold;\n  }\n  li {\n    margin-bottom: 1em;\n  }\n`;\n","import styled from '@emotion/styled';\n\nconst Button = styled.button`\n  width: 100%;\n  font-size: 28px;\n`;\n\nconst BorderedButton = styled(Button)`\n  padding: 8px 0;\n  border: 2px solid #ff5368;\n  background: transparent;\n  color: #ff5368;\n\n  &:hover {\n    color: #fff;\n  }\n`;\n\nexport { Button, BorderedButton };\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport { BorderedButton } from './buttons';\n\nimport SpinningIcon from './SpinningIcon';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n  padding: 60px 20px 20px;\n  min-height: 100vh;\n`;\n\nfunction FinishDisplay({ onBack }) {\n  return (\n    <Container>\n      <SpinningIcon icons={['🏳️‍🌈', '🙇‍♀️', '🙇‍♂️']} />\n      <p>完成囉！謝謝您 m(_ _)m</p>\n      <p>\n        <BorderedButton style={{ padding: 16, fontSize: 16 }} onClick={onBack}>\n          回首頁\n        </BorderedButton>\n      </p>\n    </Container>\n  );\n}\n\nexport default FinishDisplay;\n","import React, { useRef, useEffect } from 'react';\nimport cogoToast from 'cogo-toast';\nimport ClipboardJS from 'clipboard';\n\nimport { BorderedButton } from 'components/buttons';\n\nfunction CopyButton({ onCopy, text }) {\n  const copyBtnRef = useRef(null);\n  const clipboardInstance = useRef(null);\n\n  useEffect(() => {\n    if (clipboardInstance.current) {\n      clipboardInstance.current.destroy();\n    }\n\n    // Copy button clipboard.js setup\n    clipboardInstance.current = new ClipboardJS(copyBtnRef.current, {\n      text: () => text,\n    });\n    clipboardInstance.current.on('success', () => {\n      cogoToast.success(`「${text.slice(0, 10)}⋯⋯」已複製到剪貼簿`, {\n        position: 'bottom-center',\n      });\n      onCopy();\n    });\n    return () => {\n      if (clipboardInstance.current) {\n        clipboardInstance.current.destroy();\n      }\n    };\n  }, [copyBtnRef, onCopy, text, clipboardInstance]);\n\n  return <BorderedButton ref={copyBtnRef}>複製</BorderedButton>;\n}\n\nexport default CopyButton;\n","import React, { useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { Button } from './buttons';\nimport Notice from './Notice';\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 40px 20px 80px;\n\n  z-index: 10000;\n  overflow-y: auto;\n`;\n\nconst Outside = styled.div`\n  position: fixed;\n  z-index: -1;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nconst Dialog = styled.div`\n  margin: 0 auto;\n  display: flex; /* avoid collapsing margin with children */\n  flex-flow: column;\n  width: 80vw;\n  max-width: 320px;\n  border-radius: 5px;\n\n  color: #333;\n  background: #fff;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22);\n\n  > img {\n    width: 100%;\n    border-radius: 5px;\n  }\n`;\n\nconst StartButton = styled(Button)`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  border-radius: 0;\n  padding: 20px 0;\n`;\n\nconst TeacherIcon = styled.div`\n  position: fixed;\n  top: 16px;\n  right: 16px;\n  font-size: 24px;\n\n  width: 44px;\n  height: 44px;\n  line-height: 44px;\n  border-radius: 44px;\n  text-align: center;\n\n  background: #fff;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  z-index: 9999;\n\n  &::before {\n    content: '👩‍🏫';\n  }\n`;\n\nfunction SendPageTutorial() {\n  const [dismissed, setDismissed] = useState(false);\n\n  const handleToggle = useCallback(() => {\n    setDismissed(s => !s);\n  }, [setDismissed]);\n\n  if (dismissed) {\n    return <TeacherIcon onClick={handleToggle} />;\n  }\n\n  return (\n    <Backdrop>\n      <Dialog>\n        <img\n          alt=\"FB 陳情教學 1\"\n          src={require('../images/p1.png')}\n          srcset={`\n            ${require('../images/p1.png')},\n            ${require('../images/p1@2x.png')} 2x`}\n        />\n        <Notice>\n          小撇步：\n          <ul>\n            <li>\n              公開回應會被大眾看見，可以檢視一下自己的訊息，避免給大眾帶來負面印象。\n            </li>\n            <li>留言後，可以順便對他人挺同的回應按讚，增加聲量。</li>\n          </ul>\n        </Notice>\n        <img\n          alt=\"FB 陳情教學 2\"\n          src={require('../images/p2.png')}\n          srcset={`\n          ${require('../images/p2.png')},\n          ${require('../images/p2@2x.png')} 2x`}\n        />\n        <Notice>\n          如果按下「送出」後出現{' '}\n          <img height=\"20\" src={require('../images/confirm.png')} alt=\"確認\" />\n          ，代表同一時間可能有太多人一起私訊陳情。你可以選擇：\n          <ul>\n            <li>\n              改到\n              <a\n                href=\"https://contact.hacktabl.org/index.html\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                備用網站\n              </a>\n              私訊，或者\n            </li>\n            <li>改在粉專公開留言（最上面有教學）</li>\n          </ul>\n          另外，有友善的立委建議私訊量可以少一點，請多多在粉專公開留言唷！\n        </Notice>\n      </Dialog>\n      <StartButton onClick={handleToggle}>知道了，開始吧！</StartButton>\n      <Outside onClick={handleToggle} />\n    </Backdrop>\n  );\n}\n\nexport default SendPageTutorial;\n","import React, { useRef, useCallback, useState, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport useLegislatorContactData from 'lib/useLegislatorContactData';\n\nimport MessageInput from 'components/MessageInput';\nimport FacebookPagePlugin from 'components/FacebookPagePlugin';\nimport LegislatorDisplay from 'components/LegislatorDisplay';\nimport ContactDisplay from 'components/ContactDisplay';\nimport FinishDisplay from 'components/FinishDisplay';\nimport { Button } from 'components/buttons';\nimport CopyButton from './components/CopyButton';\nimport SendPageTutorial from './components/SendPageTutorial';\n\nconst Header = styled.header`\n  position: fixed;\n  background: rgba(0, 0, 0, 0.88);\n  -webkit-backdrop-filter: blur(16px);\n\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  display: flex;\n  align-items: center;\n\n  z-index: 1; /* higher than other positioned contents */\n\n  span {\n    margin: 0 auto;\n  }\n`;\n\nconst HeaderProgress = styled.div`\n  position: absolute;\n  z-index: -1;\n  background: #7ed321;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 0;\n\n  transition: width 0.75s ease-out;\n`;\n\nconst Back = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding-left: 16px;\n  opacity: 0.5;\n  transition: opacity 0.2s;\n\n  cursor: pointer;\n  font-size: 14px;\n\n  &::before {\n    content: '';\n    width: 8px;\n    height: 8px;\n    margin-right: 8px;\n    border-top: 1px solid #fff;\n    border-left: 1px solid #fff;\n    transform: rotate(-45deg);\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst Container = styled.div`\n  padding: 60px 20px 20px;\n  min-height: 100vh;\n\n  section {\n    display: flex;\n    flex-flow: column;\n  }\n\n  @media screen and (min-width: 1024px) {\n    display: flex;\n    max-width: 1280px;\n    height: 100vh;\n    padding: 60px 40px 40px;\n    margin: 0 auto;\n\n    section {\n      flex: 3;\n      padding-left: 24px;\n      &:first-of-type {\n        flex: 2;\n        padding-left: 0;\n      }\n    }\n  }\n`;\n\nconst NextButton = styled(Button, {\n  shouldForwardProp() {\n    return true;\n  },\n})`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &::after {\n    margin-left: 16px;\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n`;\n\nconst PluginWrapper = styled.div`\n  position: relative; /* for AutoSizer */\n  flex: 1 1 60vh;\n\n  border: 2px solid #ff9753;\n  border-bottom: 0;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  overflow: hidden;\n\n  .preload-iframe {\n    position: absolute;\n    opacity: 0;\n    top: 0;\n    left: 0;\n    z-index: -1;\n  }\n\n  @media screen and (min-width: 1024px) {\n    flex-basis: auto;\n  }\n`;\n\nconst Hint = styled.div`\n  background: #ff9753;\n  padding: 4px;\n  border-top: 0;\n  border-bottom-right-radius: 8px;\n  border-bottom-left-radius: 8px;\n  font-size: 14px;\n}\n`;\n\nfunction SendPage({\n  msg = '',\n  currentIdx = 0 /* -1 when done */,\n  selectedLegislators = [],\n  sendType = '',\n\n  onMsgChange = () => {},\n  onPrev = () => {},\n  onNext = () => {},\n  onBack = () => {},\n}) {\n  const submitStepRef = useRef(null);\n  const getContactByName = useLegislatorContactData();\n\n  // Set after plugin is parsed.\n  // This fixes the height of plugin on mobile so that window height change caused by browser footer\n  // or keyboard would not affect the component height after it's loaded.\n  //\n  // In the mean time, it does not affect desktop because desktop's height is determined\n  // by row flexbox.\n  //\n  const [pluginHeight, setPluginHeight] = useState(null);\n\n  const handleNext = useCallback(() => {\n    submitStepRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n    onNext();\n  }, [submitStepRef, onNext]);\n\n  const handleCopy = useCallback(() => {\n    submitStepRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n  }, [submitStepRef]);\n\n  useEffect(() => {\n    // Scroll to top when changing to send page\n    window.scrollTo(0, 0);\n  }, []);\n\n  if (currentIdx === -1) {\n    // Show finish screen\n    return <FinishDisplay onBack={onBack} />;\n  }\n\n  // Data not loaded yet\n  if (!selectedLegislators || !selectedLegislators[currentIdx]) {\n    return null;\n  }\n\n  const {\n    name,\n    facebookpage,\n    facebookprofile,\n    cannotload,\n  } = selectedLegislators[currentIdx];\n\n  return (\n    <>\n      {sendType === 'fb' && <SendPageTutorial />}\n      <Header>\n        <Back onClick={onBack}>設定立委</Back>\n        <span>\n          {currentIdx + 1} / {selectedLegislators.length}\n        </span>\n        <HeaderProgress\n          style={{\n            width: `${(\n              (100 * (currentIdx + 1)) /\n              selectedLegislators.length\n            ).toFixed(2)}%`,\n          }}\n        />\n      </Header>\n      <Container>\n        <LegislatorDisplay legislator={selectedLegislators[currentIdx]} />\n        <section>\n          <h1>{sendType === 'fb' ? '1. 複製文字' : '1. 備好講稿'}</h1>\n          <MessageInput\n            style={{ flex: 1 }}\n            placeholder=\"把陳情文字貼在這裡，方便複製貼上\"\n            onChange={e => onMsgChange(e.target.value)}\n            value={msg}\n            rows={5}\n          />\n          {sendType === 'fb' && (\n            <p style={{ marginBottom: 0 }}>\n              <CopyButton onCopy={handleCopy} text={msg} />\n            </p>\n          )}\n        </section>\n        <section ref={submitStepRef}>\n          <h1>{sendType === 'fb' ? '2. 貼上並送出' : '2. 拿起話筒撥打'}</h1>\n          {sendType === 'fb' ? (\n            <>\n              <PluginWrapper\n                style={\n                  pluginHeight\n                    ? {\n                        height: pluginHeight,\n                        flexBasis: 'auto',\n                      } /* fix height of PluginWrapper */\n                    : {}\n                }\n              >\n                <AutoSizer>\n                  {({ width, height }) => [\n                    <FacebookPagePlugin\n                      key={currentIdx}\n                      href={facebookpage}\n                      profile={facebookprofile}\n                      canLoad={!cannotload}\n                      width={width - 4 /* left/right border width */}\n                      height={height - 2 /* top border width */}\n                      onParsed={({ height }) =>\n                        setPluginHeight(height + 2 /* top border width */)\n                      }\n                    />,\n                    selectedLegislators[currentIdx + 1] && (\n                      <FacebookPagePlugin\n                        className=\"preload-iframe\"\n                        key={currentIdx + 1}\n                        href={selectedLegislators[currentIdx + 1].facebookpage}\n                        profile={\n                          selectedLegislators[currentIdx + 1].facebookprofile\n                        }\n                        canLoad={\n                          !selectedLegislators[currentIdx + 1].cannotload\n                        }\n                        width={width - 4 /* left/right border width */}\n                        height={height - 2 /* top border width */}\n                      />\n                    ),\n                  ]}\n                </AutoSizer>\n              </PluginWrapper>\n              <Hint>\n                ＊ 請挑選一篇貼文回應。\n                {facebookprofile ? (\n                  <>\n                    委員另有\n                    <a\n                      href={facebookprofile}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      個人頁面\n                    </a>\n                    可供留言。\n                  </>\n                ) : null}\n              </Hint>\n            </>\n          ) : (\n            getContactByName && (\n              <ContactDisplay contacts={getContactByName(name)} />\n            )\n          )}\n\n          <p style={{ marginBottom: 0 }}>\n            <NextButton\n              ga-on=\"click\"\n              ga-event-category=\"send\"\n              ga-event-action=\"submit\"\n              ga-event-label={name}\n              onClick={handleNext}\n            >\n              下一位\n            </NextButton>\n          </p>\n        </section>\n      </Container>\n    </>\n  );\n}\n\nexport default SendPage;\n","import React, { useLayoutEffect, useRef } from 'react';\nimport styled from '@emotion/styled';\n\nimport waitForFB from 'lib/waitForFB';\n\nfunction getUrl(type, id) {\n  switch (type) {\n    case 'comment': {\n      const [postId, commentId] = id.split('_');\n      return `https://www.facebook.com/${postId}/?comment_id=${commentId}`;\n    }\n\n    case 'post': {\n      const [pageId, visitorPostId] = id.split('_');\n      return `https://www.facebook.com/${pageId}/posts/${visitorPostId}`;\n    }\n\n    default:\n      throw new Error('unrecognized type');\n  }\n}\n\nfunction FacebookEmbedPlugin({\n  id = '',\n  type = 'comment',\n  onParsed = () => {},\n  className,\n}) {\n  const fbRoot = useRef(null);\n\n  useLayoutEffect(() => {\n    waitForFB.then(() => {\n      window.FB.XFBML.parse(fbRoot.current, () => {\n        if (onParsed) {\n          onParsed({ id, type });\n        }\n      });\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div ref={fbRoot} className={className}>\n      <div\n        className={`fb-${type === 'comment' ? 'comment-embed' : 'post'}`}\n        data-href={getUrl(type, id)}\n      />\n    </div>\n  );\n}\n\nexport default React.memo(styled(FacebookEmbedPlugin)`\n  /* avoid totally collapse when not loaded */\n  min-width: 150px;\n  min-height: 120px;\n  text-align: center; /* inner div will become inline-block by Facebook JS */\n\n  > div {\n    position: relative; /* for loading mask */\n\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.88);\n      pointer-events: none;\n      transition: opacity 0.8s;\n      z-index: 1;\n    }\n\n    &[fb-xfbml-state='rendered']::before {\n      opacity: 0;\n    }\n  }\n\n  .fb-comment-embed,\n  .fb-post {\n    background: #fff;\n    border-radius: 4px;\n  }\n`);\n","import React, { useRef, useCallback, useState, Fragment } from 'react';\nimport styled from '@emotion/styled';\nimport useIntersectionObserver from '../lib/useIntersectionObserver';\nimport FacebookEmbedPlugin from './FacebookEmbedPlugin';\n\nconst TARGET_PER_SECTION = 5;\nconst PLACEHOLDER_HEIGHT_PER_TARGET = 120;\n\nconst Footer = styled.footer`\n  margin: 4px 0 24px;\n  font-size: 12px;\n\n  button {\n    background: transparent;\n    padding: 0;\n    color: #53baff;\n  }\n`;\n\n/**\n * @param {string} id\n * @param {string} type\n * @return {function} callback\n */\nfunction sendLikeShowEvent(id, type) {\n  return () => {\n    window.ga('send', 'event', 'like', 'show', `${type}/${id}`);\n  };\n}\n\nfunction sendReport(id) {\n  return () => {\n    if (\n      // eslint-disable-next-line no-restricted-globals\n      !confirm(\n        '有時我們確實會誤判一則訊息為「平權訊息」。請問您要回報這則訊息「不是平權訊息」嗎？'\n      )\n    ) {\n      return;\n    }\n\n    window.Rollbar.info(`Message not promoting gay marriage: ${id}`);\n    alert('感謝您的回報，我們會儘速處理。');\n  };\n}\n\nfunction LikeTargetSection({\n  likeTargets = [],\n  show = false,\n  onVisible = () => {},\n}) {\n  const sectionRef = useRef(null);\n  let disconnect;\n  const handleView = useCallback(\n    entries => {\n      if (entries[0].isIntersecting) {\n        disconnect();\n        onVisible();\n      }\n    },\n    [disconnect, onVisible]\n  );\n  disconnect = useIntersectionObserver(sectionRef, handleView);\n\n  return (\n    <section\n      ref={sectionRef}\n      style={\n        show\n          ? {}\n          : { height: PLACEHOLDER_HEIGHT_PER_TARGET * likeTargets.length }\n      }\n    >\n      {show\n        ? likeTargets.map(({ id, type }) => (\n            <Fragment key={`${type}_${id}`}>\n              <FacebookEmbedPlugin\n                id={id}\n                type={type}\n                onParsed={sendLikeShowEvent(id, type)}\n              />\n              <Footer>\n                <a\n                  href={`https://www.facebook.com/${id}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  無法載入請點此\n                </a>\n                ・<button onClick={sendReport(id)}>這不是平權訊息</button>\n              </Footer>\n            </Fragment>\n          ))\n        : null}\n    </section>\n  );\n}\n\nfunction LikeTargetList({ likeTargets }) {\n  const [showIdx, setShowIdx] = useState(0);\n\n  const likeTargetSections = likeTargets.reduce((sections, likeTarget) => {\n    if (sections.length === 0) {\n      return [[likeTarget]];\n    }\n    const lastSection = sections[sections.length - 1];\n    if (lastSection.length < TARGET_PER_SECTION) {\n      lastSection.push(likeTarget);\n      return sections;\n    }\n\n    sections.push([likeTarget]);\n    return sections;\n  }, []);\n\n  const handleSectionVisible = useCallback(() => {\n    setShowIdx(idx => idx + 1);\n  }, [setShowIdx]);\n\n  return (\n    <>\n      {likeTargetSections.map((section, idx) => (\n        <LikeTargetSection\n          key={idx}\n          likeTargets={section}\n          show={idx <= showIdx}\n          onVisible={handleSectionVisible}\n        />\n      ))}\n    </>\n  );\n}\n\nexport default LikeTargetList;\n","import React, { useCallback, memo } from 'react';\nimport styled from '@emotion/styled';\n\nfunction LikeTargetDateSelect({ likeTargetsByDate, onChange, value }) {\n  const handleChange = useCallback(e => onChange(+e.target.value), [onChange]);\n\n  return (\n    <select onChange={handleChange} value={value}>\n      {likeTargetsByDate.map((likeTargets, idx) => (\n        <option key={idx} value={idx}>\n          {likeTargets[0].date.toLocaleDateString()} ({likeTargets.length} 則)\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport default memo(styled(LikeTargetDateSelect)`\n  font-size: 24px;\n  padding: 8px 16px;\n`);\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport LikeTargetList from './components/LikeTargetList';\nimport LikeTargetDateSelect from './components/LikeTargetDateSelect';\nimport Divider from './components/Divider';\nimport Jumbotron from './components/Jumbotron';\nimport Emphasis from './components/Emphasis';\n\nfunction sortByDateThenLen(\n  { date: dateLeft, len: lenLeft },\n  { date: dateRight, len: lenRight }\n) {\n  if (+dateLeft !== +dateRight) {\n    return dateRight - dateLeft;\n  }\n\n  return lenRight - lenLeft;\n}\n\nfunction convertRowsToLikeTargetsByDate(rows) {\n  return rows\n    .map(({ createdtime, ...row }) => ({\n      date: new Date(createdtime.replace(/T.+$/, '')),\n      ...row,\n    }))\n    .sort(sortByDateThenLen)\n    .reduce((grouped, likeTarget) => {\n      if (grouped.length === 0) return [[likeTarget]];\n\n      const lastGroup = grouped[grouped.length - 1];\n      if (+likeTarget.date === +lastGroup[0].date) {\n        lastGroup.push(likeTarget);\n        return grouped;\n      }\n\n      // Create new group\n      grouped.push([likeTarget]);\n      return grouped;\n    }, []);\n}\n\nfunction LikePage({ className }) {\n  const [likeTargetsByDate, setLikeTargetsByDate] = useState(null); // [[target1, target2], [target3, target4], ...]\n  const [dateIdx, setDateIdx] = useState(0);\n  const topRef = useRef(null);\n  const handleNextClick = useCallback(() => {\n    topRef.current.scrollIntoView(true);\n\n    // Trigger page change after scrolling is done, so that it won't trigger too many lazy loaded iframes\n    setTimeout(() => setDateIdx(idx => idx + 1), 10);\n  }, [topRef, setDateIdx]);\n\n  useEffect(() => {\n    import('data/fb.json').then(({ default: { rows } }) =>\n      setLikeTargetsByDate(convertRowsToLikeTargetsByDate(rows))\n    );\n  }, []);\n\n  if (likeTargetsByDate === null) {\n    return <section>Loading...</section>;\n  }\n\n  const currentLikeTargets = likeTargetsByDate[dateIdx];\n  const currentDate = currentLikeTargets[0].date;\n\n  const nextTargetCount = likeTargetsByDate[dateIdx + 1]\n    ? likeTargetsByDate[dateIdx + 1].length\n    : 0;\n\n  return (\n    <main className={className}>\n      <Jumbotron>\n        <h1>平權聲音讚出來</h1>\n        <h2>一起來幫平權留言按讚吧！</h2>\n      </Jumbotron>\n\n      <p>\n        婚姻平權相關法案在立院攻防的同時，立委們的臉書也\n        <Emphasis>同時被挺同與反同洗版</Emphasis>。\n      </p>\n      <p>\n        讓我們一起立委臉書裡，<Emphasis>挺平權的聲音按讚</Emphasis>\n        、給願意發聲的平權夥伴一些鼓勵， 也讓看到立委 FB\n        的人民知道，平權的聲音是有人挺的！\n      </p>\n\n      <Divider />\n\n      <p ref={topRef}>\n        <LikeTargetDateSelect\n          likeTargetsByDate={likeTargetsByDate}\n          value={dateIdx}\n          onChange={setDateIdx}\n        />\n      </p>\n\n      {/* Reset LikeTargetList state whenever date changes */}\n      <LikeTargetList key={dateIdx} likeTargets={currentLikeTargets} />\n\n      <Divider />\n\n      <p>{currentDate.toLocaleDateString()} 的訊息都在上面囉！</p>\n\n      <p>\n        {nextTargetCount ? (\n          <button onClick={handleNextClick}>\n            繼續幫 {nextTargetCount} 則留言打氣\n          </button>\n        ) : (\n          <p>沒有更舊的資料囉。謝謝願意幫平權的聲音打氣！</p>\n        )}\n      </p>\n    </main>\n  );\n}\n\nexport default styled(LikePage)`\n  padding: 16px;\n  text-align: center;\n`;\n","import { useState, useEffect, useMemo } from 'react';\n\n// shared storage of legislators\nlet legislatorData = null;\n\n/**\n * @returns {[object[], object]} legislators & legislatorMap (id to legislator)\n */\nfunction useLegislatorData() {\n  const [legislators, setLegislators] = useState(legislatorData);\n\n  useEffect(() => {\n    if (legislators) return;\n\n    import('data/legislators.json').then(data =>\n      setLegislators(\n        (legislatorData = /* filter out legislators that has no PrideWatch data */ data.default.rows.filter(\n          ({ area }) => !!area\n        ))\n      )\n    );\n  }, [legislators]);\n\n  return [\n    legislators,\n    useMemo(\n      () =>\n        (legislators || []).reduce((agg, legislator) => {\n          agg[legislator.id] = legislator;\n          return agg;\n        }, {}),\n      [legislators]\n    ),\n  ];\n}\n\nexport default useLegislatorData;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport SettingsPage from './SettingsPage';\nimport SendPage from './SendPage';\nimport LikePage from './LikePage';\nimport useLegislatorData from 'lib/useLegislatorData';\n\nconst POSITION_ORDER = {\n  未表態: 1,\n  反對同婚: 2,\n  支持專法: 3,\n  支持同婚: 4,\n};\n\nconst DEFAULT_SEND_TYPE = 'fb';\nconst DEFAULT_FB_MESSAGE =\n  '感謝委員支持行政院版同婚專法，不但符合公投結果、也顧了大法官釋憲！';\nconst DEFAULT_TEL_MESSAGE =\n  '您好，我想要感謝委員支持行政院版748施行法！我一定支持委員！';\n\nconst DEFAULT_PAGE = window.location.hash === '#/like' ? 'like' : 'settings';\n\nfunction App() {\n  const [legislators, legislatorMap] = useLegislatorData();\n  const [page, setPage] = useState(DEFAULT_PAGE); // current page. enum: 'settings', 'send'\n  const [msg, setMsg] = useState(DEFAULT_FB_MESSAGE); // message template\n  const [selectedLegislatorIds, setLegislatorIds] = useState([]); // list of selected legislator ID, with done legislators always in front.\n  const [doneLegislatorMap, setLegislatorDone] = useState({}); // {[done legislator ID]: true, ...}\n  const [sendType, setSendType] = useState(DEFAULT_SEND_TYPE); // 'fb', 'tel'\n\n  const selectedLegislators = useMemo(\n    () => selectedLegislatorIds.map(id => legislatorMap[id]),\n    [selectedLegislatorIds, legislatorMap]\n  );\n  const currentIdx = useMemo(\n    () => selectedLegislatorIds.findIndex(id => !doneLegislatorMap[id]),\n    [selectedLegislatorIds, doneLegislatorMap]\n  );\n\n  const handleSelectionChange = useCallback(\n    selectedLegislatorIds => {\n      setLegislatorIds(\n        selectedLegislatorIds.sort((aId, bId) => {\n          // First, put done legislators in front\n          if (doneLegislatorMap[aId] && !doneLegislatorMap[bId]) return -1;\n          if (!doneLegislatorMap[aId] && doneLegislatorMap[bId]) return 1;\n\n          // Then compare their positions\n          const aPos = POSITION_ORDER[legislatorMap[aId].position];\n          const bPos = POSITION_ORDER[legislatorMap[bId].position];\n          if (aPos - bPos !== 0) {\n            return aPos - bPos;\n          }\n\n          return aId - bId;\n        })\n      );\n    },\n    [setLegislatorIds, doneLegislatorMap, legislatorMap]\n  );\n\n  const handleSendTypeChange = useCallback(\n    newSendType => {\n      if (newSendType === sendType) return;\n      setSendType(newSendType);\n      window.ga('set', 'dimension2', newSendType);\n\n      if (\n        newSendType === 'fb' &&\n        (msg.trim() === '' || msg === DEFAULT_TEL_MESSAGE)\n      ) {\n        setMsg(DEFAULT_FB_MESSAGE);\n      } else if (\n        newSendType === 'tel' &&\n        (msg.trim() === '' || msg === DEFAULT_FB_MESSAGE)\n      ) {\n        setMsg(DEFAULT_TEL_MESSAGE);\n      }\n    },\n    [msg, setMsg, sendType, setSendType]\n  );\n\n  const handleSettingsSubmit = useCallback(() => setPage('send'), [setPage]);\n  const handleBackToSettings = useCallback(() => setPage('settings'), [\n    setPage,\n  ]);\n\n  const handleNext = useCallback(\n    () =>\n      setLegislatorDone({\n        ...doneLegislatorMap,\n        [selectedLegislators[currentIdx].id]: true,\n      }),\n    [doneLegislatorMap, selectedLegislators, currentIdx]\n  );\n\n  switch (page) {\n    case 'settings':\n      return (\n        <SettingsPage\n          msg={msg}\n          onMsgChange={setMsg}\n          legislators={legislators}\n          selectedLegislatorIds={selectedLegislatorIds}\n          onSelectionChange={handleSelectionChange}\n          doneLegislatorMap={doneLegislatorMap}\n          sendType={sendType}\n          onSendTypeChange={handleSendTypeChange}\n          onSubmit={handleSettingsSubmit}\n        />\n      );\n\n    case 'send':\n      return (\n        <SendPage\n          msg={msg}\n          sendType={sendType}\n          currentIdx={currentIdx}\n          selectedLegislators={selectedLegislators}\n          onMsgChange={setMsg}\n          onNext={handleNext}\n          onBack={handleBackToSettings}\n        />\n      );\n\n    case 'like': {\n      return <LikePage />;\n    }\n\n    default:\n      throw new Error('Wrong page settings');\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/stable';\nimport 'autotrack/lib/plugins/event-tracker';\nimport 'autotrack/lib/plugins/outbound-link-tracker';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nwindow.ga('require', 'eventTracker');\nwindow.ga('require', 'outboundLinkTracker');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}