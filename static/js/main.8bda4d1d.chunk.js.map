{"version":3,"sources":["components/MessageInput.js","components/Checkbox.js","components/LegislatorSections.js","components/SpinningIcon.js","components/Divider.js","lib/useIntersectionObserver.js","components/StartButton.js","SettingsPage.js","lib/waitForFB.js","components/FacebookPagePlugin.js","SendPage.js","lib/useLegislatorData.js","App.js","serviceWorker.js","index.js"],"names":["TextArea","styled","textarea","_templateObject","MessageInput","props","value","handleBlur","useCallback","window","ga","react_default","a","createElement","Object","assign","onBlur","Checkbox","_ref","_ref$isIndeterminate","isIndeterminate","objectWithoutProperties","type","ref","checkbox","indeterminate","defaultProps","Container","div","LegislatorSections_templateObject","CheckboxList","ul","_templateObject2","PositionCheckboxList","_templateObject3","Section","section","_templateObject4","PositionSelector","_ref2","legislators","selectedIdMap","_ref2$onChange","onChange","positionTotalMap","useMemo","reduce","agg","_ref3","id","position","positionCountMap","_ref4","handleToggle","e","toggledPosition","target","filter","_ref5","map","_ref6","_ref7","_ref8","keys","p","key","components_Checkbox","checked","LegislatorSection","_ref9","_ref9$area","area","_ref9$legislators","_ref9$selectedIdMap","_ref9$onChange","selectedCount","_ref10","length","handleSectionToggle","_ref11","legislatorMap","_ref12","handleSingleToggle","selectedId","concat","_ref13","name","LegislatorSections","_ref$legislators","_ref$selectedLegislat","selectedLegislatorIds","_ref$onSelectionChang","doneLegislatorsMap","onSelectionChange","legislatorsByArea","areas","legislator","push","DURATION","flip","keyframes","SpinningIcon_templateObject","_ref$icons","icons","_useState","useState","_useState2","slicedToArray","idx","setIdx","iconCount","useEffect","handle","setTimeout","clearTimeout","role","aria-label","SpinningIcon_templateObject2","_ref$content","content","Divider_templateObject","useIntersectionObserver","elem","arguments","undefined","onView","io","useRef","useLayoutEffect","current","disconnect","IntersectionObserver","observe","SECONDS_EACH_LEGISLATOR","BreakOnSmallScreen","br","StartButton_templateObject","onClick","_ref$show","show","className","hasStarted","legislatorToSendCount","totalSeconds","timeStr","Math","floor","ga-on","ga-event-category","ga-event-action","ga-event-label","ga-event-value","StartButton_templateObject2","PageContainer","SettingsPage_templateObject","Jumbotron","header","SettingsPage_templateObject2","Emphasis","em","SettingsPage_templateObject3","Footer","footer","SettingsPage_templateObject4","SettingsPage","_ref$msg","msg","_ref$onMsgChange","onMsgChange","_ref$doneLegislatorsM","_ref$onSubmit","onSubmit","selectionSectionRef","isSelectionInView","setSelectionInView","handleNextClick","scrollIntoView","behavior","block","handleSelectionIntersect","entries","isIntersecting","components_SpinningIcon","components_Divider","components_MessageInput","rows","autoFocus","components_LegislatorSections","components_StartButton","href","rel","fbPromise","FB","Promise","resolve","fbAsyncInit","then","init","appId","process","version","DEFAULT_TABS","React","memo","_ref$className","_ref$tabs","tabs","_ref$href","_ref$width","width","_ref$height","height","_ref$onParsed","onParsed","fbRoot","waitForFB","XFBML","parse","data-href","data-tabs","join","data-small-header","data-adapt-container-width","data-show-facepile","data-hide-cta","data-width","data-height","Header","SendPage_templateObject","HeaderProgress","SendPage_templateObject2","Back","SendPage_templateObject3","SendPage_templateObject4","Button","button","_templateObject5","BorderedButton","_templateObject6","NextButton","shouldForwardProp","_templateObject7","LegislatorData","article","_templateObject8","PluginWrapper","_templateObject9","Hint","_templateObject10","_templateObject11","SendPage","_ref$currentIdx","currentIdx","selectedLegislators","_ref$onNext","onPrev","onNext","_ref$onBack","onBack","copyBtnRef","submitStepRef","pluginHeight","setPluginHeight","handleNext","clipboard","ClipboardJS","text","on","cogoToast","success","slice","destroy","SendPage_Container","style","display","alignItems","justifyContent","flexFlow","padding","fontSize","_selectedLegislators$","pridewatchpage","description","party","religion","subarea","facebookpage","Fragment","toFixed","overflowX","split","desc","SendPage_Footer","flex","placeholder","flexBasis","index_esm","components_FacebookPagePlugin","legislatorData","useLegislatorData","setLegislators","__webpack_require__","t","bind","data","default","DEFAULT_MESSAGE","POSITION_ORDER","æ”¯æŒåŒå©š","æ”¯æŒå°ˆæ³•","åå°åŒå©š","æœªè¡¨æ…‹","App","_useLegislatorData","_useLegislatorData2","page","setPage","_useState3","_useState4","setMsg","_useState5","_useState6","setLegislatorIds","_useState7","_useState8","doneLegislatorMap","setLegislatorDone","findIndex","handleSelectionChange","sort","aId","bId","handleSettingsSubmit","handleBackToSettings","objectSpread","defineProperty","src_SettingsPage","src_SendPage","Error","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"8pBAGA,IAAMA,EAAWC,IAAOC,SAAVC,KA6BCC,MAVf,SAAsBC,GAAO,IACnBC,EAAUD,EAAVC,MAEFC,EAAaC,sBAAY,WAC7BC,OAAOC,GAAG,MAAO,aAAcJ,IAC9B,CAACA,IAEJ,OAAOK,EAAAC,EAAAC,cAACb,EAADc,OAAAC,OAAA,GAAcV,EAAd,CAAqBW,OAAQT,cC1BtC,SAASU,EAATC,GAAyD,IAAAC,EAAAD,EAArCE,uBAAqC,IAAAD,KAATd,EAASS,OAAAO,EAAA,EAAAP,CAAAI,EAAA,qBAOvD,OAAOP,EAAAC,EAAAC,cAAA,QAAAC,OAAAC,OAAA,CAAOO,KAAK,WAAWC,IANP,SAAAC,GACjBA,IACFA,EAASC,cAAgBL,KAI0Bf,IAGzDY,EAASS,aAAe,CACtBN,iBAAiB,GAGJH,+sBCbf,IAAMU,EAAY1B,IAAO2B,IAAVC,KAeTC,EAAe7B,IAAO8B,GAAVC,KAKZC,EAAuBhC,YAAO6B,EAAP7B,CAAHiC,KAMpBC,EAAUlC,IAAOmC,QAAVC,KAgEb,SAASC,EAATC,GAA+E,IAAnDC,EAAmDD,EAAnDC,YAAaC,EAAsCF,EAAtCE,cAAsCC,EAAAH,EAAvBI,gBAAuB,IAAAD,EAAZ,aAAYA,EAEvEE,EAAmBC,kBACvB,kBACEL,EAAYM,OAAO,SAACC,EAADC,GAA2BA,EAAnBC,GAAmB,IAAfC,EAAeF,EAAfE,SAI7B,OAHAH,EAAIG,GAAYH,EAAIG,IAAa,EACjCH,EAAIG,IAAa,EAEVH,GACN,KACL,CAACP,IAIGW,EAAmBN,kBACvB,kBACEL,EAAYM,OAAO,SAACC,EAADK,GAA2B,IAAnBH,EAAmBG,EAAnBH,GAAIC,EAAeE,EAAfF,SAK7B,OAJAH,EAAIG,GAAYH,EAAIG,IAAa,EAC7BT,EAAcQ,KAChBF,EAAIG,IAAa,GAEZH,GACN,KACL,CAACP,EAAaC,IAGVY,EAAe7C,sBACnB,SAAA8C,GACE,IAAMC,EAAkBD,EAAEE,OAAOlD,MAES,IAAtC6C,EAAiBI,GAEnBZ,EACEH,EACGiB,OACC,SAAAC,GAAA,IAAGR,EAAHQ,EAAGR,SAAUD,EAAbS,EAAaT,GAAb,OACEC,IAAaK,GAAmBd,EAAcQ,KAEjDU,IAAI,SAAAC,GAAA,OAAAA,EAAGX,MAIZN,EACEH,EACGiB,OACC,SAAAI,GAAA,IAAGX,EAAHW,EAAGX,SAAUD,EAAbY,EAAaZ,GAAb,OACEC,IAAaK,GAAmBd,EAAcQ,KAEjDU,IAAI,SAAAG,GAAA,OAAAA,EAAGb,OAIhB,CAACE,EAAkBX,EAAaG,EAAUF,IAG5C,OACE9B,EAAAC,EAAAC,cAACoB,EAAD,KACGnB,OAAOiD,KAAKnB,GAAkBe,IAAI,SAAAK,GAAC,OAClCrD,EAAAC,EAAAC,cAAA,MAAIoD,IAAKD,GACPrD,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACqD,EAAD,CACE5D,MAAO0D,EACPrB,SAAUU,EACVc,QAAShB,EAAiBa,KAAOpB,EAAiBoB,GAClD5C,gBACE,EAAI+B,EAAiBa,IACrBb,EAAiBa,GAAKpB,EAAiBoB,KAExC,IACFA,OAgBb,SAASI,EAATC,GAKG,IAAAC,EAAAD,EAJDE,YAIC,IAAAD,EAJM,GAINA,EAAAE,EAAAH,EAHD7B,mBAGC,IAAAgC,EAHa,GAGbA,EAAAC,EAAAJ,EAFD5B,qBAEC,IAAAgC,EAFe,GAEfA,EAAAC,EAAAL,EADD1B,gBACC,IAAA+B,EADU,aACVA,EACKC,EAAgBnC,EAAYiB,OAAO,SAAAmB,GAAA,IAAG3B,EAAH2B,EAAG3B,GAAH,OAAYR,EAAcQ,KAChE4B,OAEGC,EAAsBtE,sBAC1B,SAAA8C,GACE,GAAsB,IAAlBqB,EAEFhC,EAASH,EAAYmB,IAAI,SAAAoB,GAAA,OAAAA,EAAG9B,UACvB,CACL,IAAM+B,EAAgBxC,EAAYM,OAAO,SAACC,EAADkC,GAEvC,OADAlC,EADwDkC,EAAThC,KACrC,EACHF,GACN,IAEHJ,EAAS7B,OAAOiD,KAAKtB,GAAegB,OAAO,SAAAR,GAAE,OAAK+B,EAAc/B,QAGpE,CAACT,EAAaG,EAAUgC,IAGpBO,EAAqB1E,sBACzB,SAAA8C,GACE,IAAM6B,EAAa7B,EAAEE,OAAOlD,MAExBmC,EAAc0C,GAEhBxC,EAAS7B,OAAOiD,KAAKtB,GAAegB,OAAO,SAAAR,GAAE,OAAIA,IAAOkC,KAGxDxC,EAAS7B,OAAOiD,KAAKtB,GAAe2C,OAAOD,KAG/C,CAAC3C,EAAaC,EAAeE,IAG/B,OACEhC,EAAAC,EAAAC,cAACsB,EAAD,KACExB,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACqD,EAAD,CACEvB,SAAUmC,EACV1D,gBACE,EAAIuD,GAAiBA,EAAgBnC,EAAYqC,OAEnDV,QAASQ,IAAkBnC,EAAYqC,SACtC,IACFN,IAGL5D,EAAAC,EAAAC,cAACiB,EAAD,KACGU,EAAYmB,IAAI,SAAA0B,GAAA,IAAGpC,EAAHoC,EAAGpC,GAAIqC,EAAPD,EAAOC,KAAP,OACf3E,EAAAC,EAAAC,cAAA,MAAIoD,IAAKhB,GACPtC,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACqD,EAAD,CACED,IAAKhB,EACL3C,MAAO2C,EACPN,SAAUuC,EACVf,UAAW1B,EAAcQ,KACxB,IACFqC,QASAC,MA5Mf,SAAArE,GAKG,IAAAsE,EAAAtE,EAJDsB,mBAIC,IAAAgD,EAJa,GAIbA,EAAAC,EAAAvE,EAHDwE,6BAGC,IAAAD,EAHuB,GAGvBA,EAAAE,GAAAzE,EAFD0E,mBAEC1E,EADD2E,0BACC,IAAAF,EADmB,aACnBA,EACKG,EAAoBjD,kBACxB,kBACEL,EAAYM,OAAO,SAACiD,EAAOC,GAGzB,OAFAD,EAAMC,EAAWzB,MAAQwB,EAAMC,EAAWzB,OAAS,GACnDwB,EAAMC,EAAWzB,MAAM0B,KAAKD,GACrBD,GACN,KACL,CAACvD,IAGGC,EAAgBI,kBACpB,kBACE6C,EAAsB5C,OAAO,SAACC,EAAKE,GAEjC,OADAF,EAAIE,IAAM,EACHF,GACN,KACL,CAAC2C,IAGH,OACE/E,EAAAC,EAAAC,cAACc,EAAD,KACEhB,EAAAC,EAAAC,cAACyB,EAAD,CACEE,YAAaA,EACbC,cAAeA,EACfE,SAAUkD,IAEX/E,OAAOiD,KAAK+B,GAAmBnC,IAAI,SAAAY,GAAI,OACtC5D,EAAAC,EAAAC,cAACuD,EAAD,CACEH,IAAKM,EACLA,KAAMA,EACN9B,cAAeA,EACfD,YAAasD,EAAkBvB,GAC/B5B,SAAUkD,svBCnFpB,IAAMK,EAAW,EA2BjB,IAAMC,EAAOC,YAAHC,KAUKpG,cAnCf,SAAAiB,GAAgD,IAAAoF,EAAApF,EAAxBqF,aAAwB,IAAAD,EAAhB,GAAgBA,EAATjG,EAASS,OAAAO,EAAA,EAAAP,CAAAI,EAAA,WAAAsF,EACxBC,mBAAS,GADeC,EAAA5F,OAAA6F,EAAA,EAAA7F,CAAA0F,EAAA,GACvCI,EADuCF,EAAA,GAClCG,EADkCH,EAAA,GAExCI,EAAYP,EAAM1B,OAUxB,OARAkC,oBAAU,WACR,IAAMC,EAASC,WAAW,WACxBJ,GAAQD,EAAM,GAAKE,IACP,IAAXZ,GAEH,OAAO,kBAAMgB,aAAaF,KACzB,CAACJ,EAAKE,IAGPnG,EAAAC,EAAAC,cAAA,OAAAC,OAAAC,OAAA,CACEkD,IAAK2C,EAELO,KAAK,MACLC,aAAW,QACP/G,GAEHkG,EAAMK,KAeE3G,CAAfoH,IASelB,8ICrCAlG,kBAVf,SAAAiB,GAA8E,IAAAoG,EAAApG,EAA3DqG,eAA2D,IAAAD,EAAjD,yMAAiDA,EAATjH,EAASS,OAAAO,EAAA,EAAAP,CAAAI,EAAA,aAC5E,OACEP,EAAAC,EAAAC,cAAA,IAAOR,EACLM,EAAAC,EAAAC,cAAA,QAAMsG,KAAK,MAAMC,aAAW,oBACzBG,KAMMtH,CAAfuH,WCSeC,MAnBf,WAAiE,IAAhCC,EAAgCC,UAAA9C,OAAA,QAAA+C,IAAAD,UAAA,GAAAA,UAAA,GAAzB,KAAME,EAAmBF,UAAA9C,OAAA,QAAA+C,IAAAD,UAAA,GAAAA,UAAA,GAAV,aAC/CG,EAAKC,iBAAO,MAElBC,0BAAgB,WAQd,OAPIF,EAAGG,SACLH,EAAGG,QAAQC,aAETR,IACFI,EAAGG,QAAU,IAAIE,qBAAqBN,EAAQ,IAC9CC,EAAGG,QAAQG,QAAQV,IAEd,WACDI,EAAGG,SACLH,EAAGG,QAAQC,eAGd,CAACR,EAAMG,+6BChBZ,IAAMQ,EAA0B,GAE1BC,EAAqBrI,IAAOsI,GAAVC,KAsDTvI,kBAxCf,SAAAiB,GAMG,IALD0E,EAKC1E,EALD0E,mBACAF,EAICxE,EAJDwE,sBACA+C,EAGCvH,EAHDuH,QAGCC,EAAAxH,EAFDyH,YAEC,IAAAD,KADDE,EACC1H,EADD0H,UAEMC,EAAa/H,OAAOiD,KAAK6B,GAAoBf,OAAS,EACtDiE,EAAwBpD,EAAsBjC,OAClD,SAAAR,GAAE,OAAK2C,EAAmB3C,KAC1B4B,OAEIkE,EAAeV,EAA0BS,EACzCE,EACJD,EAAe,IAAf,IAAA3D,OACQ6D,KAAKC,MAAMH,EAAe,IADlC,qBAAA3D,OAEQ2D,EAFR,WAIF,OACEpI,EAAAC,EAAAC,cAAA,UACES,KAAK,SACLmH,QAASA,EACTG,UAAS,GAAAxD,OAAKwD,EAAL,KAAAxD,OACPuD,GAAQG,EAAwB,EAAI,OAAS,IAE/CK,QAAM,QACNC,oBAAkB,OAClBC,kBAAgB,QAChBC,iBAAgBT,EAAa,eAAO,eACpCU,iBAAgBT,GAEhBnI,EAAAC,EAAAC,cAAA,YACGgI,EAAa,eAAO,eADvB,UAC+BC,EAD/B,kCAC4D,IAC1DnI,EAAAC,EAAAC,cAACyH,EAAD,MACA3H,EAAAC,EAAAC,cAAA,+BAAamI,EAAb,SAMO/I,CAAfuJ,k0BChDA,IAAMC,EAAgBxJ,IAAO2B,IAAV8H,KAMbC,EAAY1J,IAAO2J,OAAVC,KAsBTC,EAAW7J,IAAO8J,GAAVC,KAKRC,EAAShK,IAAOiK,OAAVC,KA4HGC,MArHf,SAAAlJ,GAQG,IAAAmJ,EAAAnJ,EAPDoJ,WAOC,IAAAD,EAPK,GAOLA,EAAAE,EAAArJ,EANDsJ,mBAMC,IAAAD,EANa,aAMbA,EAAA/E,EAAAtE,EALDsB,mBAKC,IAAAgD,EALa,GAKbA,EAAAC,EAAAvE,EAJDwE,6BAIC,IAAAD,EAJuB,GAIvBA,EAAAgF,EAAAvJ,EAHD0E,0BAGC,IAAA6E,EAHoB,GAGpBA,EAAA9E,EAAAzE,EAFD2E,yBAEC,IAAAF,EAFmB,aAEnBA,EAAA+E,EAAAxJ,EADDyJ,gBACC,IAAAD,EADU,aACVA,EACKE,EAAsB7C,iBAAO,MADlCvB,EAE+CC,oBAAS,GAFxDC,EAAA5F,OAAA6F,EAAA,EAAA7F,CAAA0F,EAAA,GAEMqE,EAFNnE,EAAA,GAEyBoE,EAFzBpE,EAAA,GAIKqE,EAAkBvK,sBACtB,kBACEoK,EAAoB3C,QAAQ+C,eAAe,CACzCC,SAAU,SACVC,MAAO,WAEX,CAACN,IAGGO,EAA2B3K,sBAAY,SAAA4K,GACvCA,EAAQ,GAAGC,eACbP,GAAmB,GAEnBA,GAAmB,KASvB,OALArD,EACEmD,EAAoB3C,QACpBkD,GAIAxK,EAAAC,EAAAC,cAAC4I,EAAD,KACE9I,EAAAC,EAAAC,cAAC8I,EAAD,KACEhJ,EAAAC,EAAAC,cAACyK,EAAD,CAAc/E,MAAO,CAAC,eAAM,qEAAe,eAAM,qEAAe,eAAM,wEACtE5F,EAAAC,EAAAC,cAAA,mBACGF,EAAAC,EAAAC,cAACiJ,EAAD,qBADH,4BAGAnJ,EAAAC,EAAAC,cAAA,+DAGFF,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,0CACOF,EAAAC,EAAAC,cAACiJ,EAAD,qBADP,8RAGEnJ,EAAAC,EAAAC,cAACiJ,EAAD,+DAHF,kCAKAnJ,EAAAC,EAAAC,cAAC0K,EAAD,MACA5K,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,sFACAF,EAAAC,EAAAC,cAAC2K,EAAD,CACElL,MAAOgK,EACP3H,SAAU,SAAAW,GAAC,OAAIkH,EAAYlH,EAAEE,OAAOlD,QACpCmL,KAAM,EACNC,WAAS,KAGb/K,EAAAC,EAAAC,cAAA,UAAQS,KAAK,SAASmH,QAASsC,GAA/B,uBAKFpK,EAAAC,EAAAC,cAAA,WAASU,IAAKqJ,GACZjK,EAAAC,EAAAC,cAAC0K,EAAD,MACA5K,EAAAC,EAAAC,cAAA,oEACAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,UACES,KAAK,SACLmH,QAAS,kBAAM5C,EAAkBrD,EAAYmB,IAAI,SAAApB,GAAA,OAAAA,EAAGU,QAFtD,yCAOFtC,EAAAC,EAAAC,cAAC8K,EAAD,CACEnJ,YAAaA,GAAe,GAC5BkD,sBAAuBA,EACvBE,mBAAoBA,EACpBC,kBAAmBA,IAErBlF,EAAAC,EAAAC,cAAC+K,EAAD,CACEjD,KAAMkC,EACNnF,sBAAuBA,EACvBE,mBAAoBA,EACpB6C,QAASkC,KAGbhK,EAAAC,EAAAC,cAACoJ,EAAD,KACEtJ,EAAAC,EAAAC,cAAC0K,EAAD,CAAShE,QAAQ,yCAEjB5G,EAAAC,EAAAC,cAAA,oCAEEF,EAAAC,EAAAC,cAAA,KAAGgL,KAAK,iDAAR,mHAFF,uCAMElL,EAAAC,EAAAC,cAAA,KAAGgL,KAAK,sCAAR,kCANF,sBASAlL,EAAAC,EAAAC,cAAA,6BACoB,IAClBF,EAAAC,EAAAC,cAAA,KACEgL,KAAK,8DACLrI,OAAO,SACPsI,IAAI,uBAHN,UAMK,IARP,6FC1IOC,IAdItL,OAAOuL,GACtBC,QAAQC,QAAQzL,OAAOuL,IACvB,IAAIC,QAAQ,SAAAC,GACVzL,OAAO0L,YAAc,WACnBD,QAGNE,KAAK,WACL3L,OAAOuL,GAAGK,KAAK,CACbC,MAAOC,kBACPC,QAAS,WCNPC,GAAe,CAAC,WAAY,YAuCnBC,WAAMC,KArCrB,SAAAzL,GAOG,IAAA0L,EAAA1L,EAND0H,iBAMC,IAAAgE,EANW,GAMXA,EAAAC,EAAA3L,EALD4L,YAKC,IAAAD,EALMJ,GAKNI,EAAAE,EAAA7L,EAJD2K,YAIC,IAAAkB,EAJM,GAINA,EAAAC,EAAA9L,EAHD+L,aAGC,IAAAD,EAHO,IAGPA,EAAAE,EAAAhM,EAFDiM,cAEC,IAAAD,EAFQ,IAERA,EAAAE,EAAAlM,EADDmM,gBACC,IAAAD,EADU,KACVA,EACKE,EAASvF,iBAAO,MAYtB,OAVAC,0BAAgB,WACduF,GAAUnB,KAAK,WACb3L,OAAOuL,GAAGwB,MAAMC,MAAMH,EAAOrF,QAAS,WAChCoF,GACFA,EAAS,CAAEJ,QAAOE,gBAIvB,CAACL,EAAMjB,EAAMoB,EAAOE,IAGrBxM,EAAAC,EAAAC,cAAA,OAAKU,IAAK+L,EAAQ1E,UAAWA,GAC3BjI,EAAAC,EAAAC,cAAA,OACE+H,UAAU,UACV8E,YAAW7B,EACX8B,YAAWb,EAAKc,KAAK,KACrBC,oBAAkB,OAClBC,6BAA2B,QAC3BC,qBAAmB,QACnBC,gBAAc,OACdC,aAAYhB,EACZiB,cAAaf,27GC1BrB,IAAMgB,GAASlO,IAAO2J,OAAVwE,MAiBNC,GAAiBpO,IAAO2B,IAAV0M,MAYdC,GAAOtO,IAAO2B,IAAV4M,MA0BJ7M,GAAY1B,IAAO2B,IAAV6M,MA2BTC,GAASzO,IAAO0O,OAAVC,MAKNC,GAAiB5O,YAAOyO,GAAPzO,CAAH6O,MAWdC,GAAa9O,YAAOyO,GAAQ,CAChCM,kBADgC,WAE9B,OAAO,IAFQ/O,CAAHgP,MA0BVC,GAAiBjP,IAAOkP,QAAVC,MAmBdC,GAAgBpP,IAAO2B,IAAV0N,MAuBbC,GAAOtP,IAAO2B,IAAV4N,MAcJvF,GAAShK,IAAOiK,OAAVuF,MAyOGC,OApOf,SAAAxO,GASG,IAAAmJ,EAAAnJ,EARDoJ,WAQC,IAAAD,EARK,GAQLA,EAAAsF,EAAAzO,EAPD0O,kBAOC,IAAAD,EAPY,EAOZA,EAAAlK,EAAAvE,EAND2O,2BAMC,IAAApK,EANqB,GAMrBA,EAAA8E,EAAArJ,EAJDsJ,mBAIC,IAAAD,EAJa,aAIbA,EAAAuF,GAAA5O,EAHD6O,OAGC7O,EAFD8O,eAEC,IAAAF,EAFQ,aAERA,EAAAG,EAAA/O,EADDgP,cACC,IAAAD,EADQ,aACRA,EACKE,EAAapI,iBAAO,MACpBqI,EAAgBrI,iBAAO,MAF5BvB,EAWuCC,mBAAS,MAXhDC,EAAA5F,OAAA6F,EAAA,EAAA7F,CAAA0F,EAAA,GAWM6J,EAXN3J,EAAA,GAWoB4J,EAXpB5J,EAAA,GAaK6J,EAAa/P,sBAAY,WAC7B4P,EAAcnI,QAAQ+C,eAAe,CACnCC,SAAU,SACVC,MAAO,UAET8E,KACC,CAACI,EAAeJ,IAmBnB,GAjBAjJ,oBAAU,WAER,IAAMyJ,EAAY,IAAIC,KAAYN,EAAWlI,QAAS,CAAEyI,KAAM,kBAAMpG,KAUpE,OATAkG,EAAUG,GAAG,UAAW,WACtBC,KAAUC,QAAV,SAAAzL,OAAsBkF,EAAIwG,MAAM,EAAG,IAAnC,gEAAoD,CAClD5N,SAAU,kBAEZkN,EAAcnI,QAAQ+C,eAAe,CACnCC,SAAU,SACVC,MAAO,YAGJ,WACLsF,EAAUO,YAEX,CAACZ,EAAYC,EAAe9F,KAEX,IAAhBsF,EAEF,OACEjP,EAAAC,EAAAC,cAACmQ,GAAD,CACEC,MAAO,CACLC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,SAAU,WAGZ1Q,EAAAC,EAAAC,cAACyK,EAAD,CAAc/E,MAAO,CAAC,uCAAU,iCAAS,oCACzC5F,EAAAC,EAAAC,cAAA,+DACAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACgO,GAAD,CACEoC,MAAO,CAAEK,QAAS,GAAIC,SAAU,IAChC9I,QAASyH,GAFX,wBAYR,IAAKL,IAAwBA,EAAoBD,GAC/C,OAAO,KAjER,IAAA4B,EA8EG3B,EAAoBD,GATtBtK,EArEDkM,EAqEClM,KACAmM,EAtEDD,EAsECC,eACAvO,EAvEDsO,EAuECtO,SACAwO,EAxEDF,EAwECE,YACAC,EAzEDH,EAyECG,MACApN,EA1EDiN,EA0ECjN,KACAqN,EA3EDJ,EA2ECI,SACAC,EA5EDL,EA4ECK,QACAC,EA7EDN,EA6ECM,aAGF,OACEnR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAmR,SAAA,KACEpR,EAAAC,EAAAC,cAACsN,GAAD,KACExN,EAAAC,EAAAC,cAAC0N,GAAD,CAAM9F,QAASyH,GAAf,4BACAvP,EAAAC,EAAAC,cAAA,YACG+O,EAAa,EADhB,MACsBC,EAAoBhL,QAE1ClE,EAAAC,EAAAC,cAACwN,GAAD,CACE4C,MAAO,CACLhE,MAAK,GAAA7H,QACF,KAAOwK,EAAa,GACrBC,EAAoBhL,QACpBmN,QAAQ,GAHL,SAOXrR,EAAAC,EAAAC,cAACmQ,GAAD,KACErQ,EAAAC,EAAAC,cAAA,WACEoQ,MAAO,CAELgB,UAAW,WAGbtR,EAAAC,EAAAC,cAAA,UAAKyE,GACL3E,EAAAC,EAAAC,cAACqO,GAAD,KACEvO,EAAAC,EAAAC,cAAA,SAAIqC,GACHwO,GACC/Q,EAAAC,EAAAC,cAAA,MAAIoQ,MAAO,CAAEK,QAAS,IACnBI,EAAYQ,MAAM,MAAMvO,IAAI,SAACwO,EAAMvL,GAAP,OAC3BjG,EAAAC,EAAAC,cAAA,MAAIoD,IAAK2C,GAAMuL,MAIrBxR,EAAAC,EAAAC,cAAA,SACG8Q,EADH,SACWpN,EACRsN,EAAO,SAAAzM,OAAOyM,GAAY,MAE5BD,EAAWjR,EAAAC,EAAAC,cAAA,SAAI+Q,GAAgB,KAChCjR,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,KACEgL,KAAM4F,EACNjO,OAAO,SACPsI,IAAI,uBAHN,6BASJnL,EAAAC,EAAAC,cAACuR,GAAD,KACEzR,EAAAC,EAAAC,cAAC0K,EAAD,MACA5K,EAAAC,EAAAC,cAAA,0CAEEF,EAAAC,EAAAC,cAAA,KACEgL,KAAK,kCACLrI,OAAO,SACPsI,IAAI,uBAHN,4EAFF,SAUEnL,EAAAC,EAAAC,cAAA,KACEgL,KAAK,mCACLrI,OAAO,SACPsI,IAAI,uBAHN,6EAUNnL,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,yCACAF,EAAAC,EAAAC,cAAC2K,EAAD,CACEyF,MAAO,CAAEoB,KAAM,GACfC,YAAY,mGACZ3P,SAAU,SAAAW,GAAC,OAAIkH,EAAYlH,EAAEE,OAAOlD,QACpCA,MAAOgK,EACPmB,KAAM,IAER9K,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACgO,GAAD,CAAgBtN,IAAK4O,GAArB,kBAGJxP,EAAAC,EAAAC,cAAA,WAASU,IAAK6O,GACZzP,EAAAC,EAAAC,cAAA,+CACAF,EAAAC,EAAAC,cAACwO,GAAD,CACE4B,MACEZ,EACI,CACElD,OAAQkD,EACRkC,UAAW,QAEb,IAGN5R,EAAAC,EAAAC,cAAC2R,EAAA,EAAD,KACG,SAAAjQ,GAAA,IAAG0K,EAAH1K,EAAG0K,MAAOE,EAAV5K,EAAU4K,OAAV,MAAuB,CACtBxM,EAAAC,EAAAC,cAAC4R,GAAD,CACExO,IAAK2L,EACL/D,KAAMiG,EACN7E,MAAOA,EAAQ,EACfE,OAAQA,EAAS,EACjBE,SAAU,SAAArK,GAAA,IAAGmK,EAAHnK,EAAGmK,OAAH,OACRmD,EAAgBnD,EAAS,MAG7B0C,EAAoBD,EAAa,IAC/BjP,EAAAC,EAAAC,cAAC4R,GAAD,CACE7J,UAAU,iBACV3E,IAAK2L,EAAa,EAClB/D,KAAMgE,EAAoBD,EAAa,GAAGkC,aAC1C7E,MAAOA,EAAQ,EACfE,OAAQA,EAAS,QAM3BxM,EAAAC,EAAAC,cAAC0O,GAAD,mGAEE5O,EAAAC,EAAAC,cAAA,6BAEFF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACkO,GAAD,CACE5F,QAAM,QACNC,oBAAkB,OAClBC,kBAAgB,SAChBC,iBAAgBhE,EAChBmD,QAAS8H,GALX,2BCrZRmC,GAAiB,KAiCNC,OA5Bf,WAA6B,IAAAnM,EACWC,mBAASiM,IADpBhM,EAAA5F,OAAA6F,EAAA,EAAA7F,CAAA0F,EAAA,GACpBhE,EADoBkE,EAAA,GACPkM,EADOlM,EAAA,GAe3B,OAZAK,oBAAU,WACJvE,GAEJqQ,EAAAvP,EAAA,GAAA8I,KAAAyG,EAAAC,EAAAC,KAAA,YAAgC3G,KAAK,SAAA4G,GAAI,OACvCJ,EACGF,GAA0EM,EAAKC,QAAQxH,KAAKhI,OAC3F,SAAAvC,GAAA,QAAAA,EAAGqD,YAMJ,CACL/B,EACAK,kBACE,kBACGL,GAAe,IAAIM,OAAO,SAACC,EAAKiD,GAE/B,OADAjD,EAAIiD,EAAW/C,IAAM+C,EACdjD,GACN,KACL,CAACP,MC1BD0Q,GACJ,iLAEIC,GAAiB,CACrBC,2BAAM,EACNC,2BAAM,EACNC,2BAAM,EACNC,qBAAK,GAkFQC,OA/Ef,WAAe,IAAAC,EACwBd,KADxBe,EAAA5S,OAAA6F,EAAA,EAAA7F,CAAA2S,EAAA,GACNjR,EADMkR,EAAA,GACO1O,EADP0O,EAAA,GAAAlN,EAEWC,mBAAS,YAFpBC,EAAA5F,OAAA6F,EAAA,EAAA7F,CAAA0F,EAAA,GAENmN,EAFMjN,EAAA,GAEAkN,EAFAlN,EAAA,GAAAmN,EAGSpN,mBAASyM,IAHlBY,EAAAhT,OAAA6F,EAAA,EAAA7F,CAAA+S,EAAA,GAGNvJ,EAHMwJ,EAAA,GAGDC,EAHCD,EAAA,GAAAE,EAIqCvN,mBAAS,IAJ9CwN,EAAAnT,OAAA6F,EAAA,EAAA7F,CAAAkT,EAAA,GAINtO,EAJMuO,EAAA,GAIiBC,EAJjBD,EAAA,GAAAE,EAKkC1N,mBAAS,IAL3C2N,EAAAtT,OAAA6F,EAAA,EAAA7F,CAAAqT,EAAA,GAKNE,EALMD,EAAA,GAKaE,EALbF,EAAA,GAOPvE,EAAsBhN,kBAC1B,kBAAM6C,EAAsB/B,IAAI,SAAAV,GAAE,OAAI+B,EAAc/B,MACpD,CAACyC,EAAuBV,IAEpB4K,EAAa/M,kBACjB,kBAAM6C,EAAsB6O,UAAU,SAAAtR,GAAE,OAAKoR,EAAkBpR,MAC/D,CAACyC,EAAuB2O,IAGpBG,EAAwBhU,sBAC5B,SAAAkF,GACEwO,EACExO,EAAsB+O,KAAK,SAACC,EAAKC,GAE/B,OAAIN,EAAkBK,KAASL,EAAkBM,IAAc,GAC1DN,EAAkBK,IAAQL,EAAkBM,GAAa,EAGjDxB,GAAenO,EAAc0P,GAAKxR,UAClCiQ,GAAenO,EAAc2P,GAAKzR,cAKrD,CAACgR,EAAkBG,EAAmBrP,IAGlC4P,EAAuBpU,sBAAY,kBAAMoT,EAAQ,SAAS,CAACA,IAC3DiB,EAAuBrU,sBAAY,kBAAMoT,EAAQ,aAAa,CAClEA,IAGIrD,EAAa/P,sBACjB,kBACE8T,EAAkBxT,OAAAgU,EAAA,EAAAhU,CAAA,GACbuT,EADYvT,OAAAiU,EAAA,EAAAjU,CAAA,GAEd+O,EAAoBD,GAAY3M,IAAK,MAE1C,CAACoR,EAAmBxE,EAAqBD,IAG3C,OAAQ+D,GACN,IAAK,WACH,OACEhT,EAAAC,EAAAC,cAACmU,EAAD,CACE1K,IAAKA,EACLE,YAAauJ,EACbvR,YAAaA,EACbkD,sBAAuBA,EACvBG,kBAAmB2O,EACnBH,kBAAmBA,EACnB1J,SAAUiK,IAIhB,IAAK,OACH,OACEjU,EAAAC,EAAAC,cAACoU,GAAD,CACE3K,IAAKA,EACLsF,WAAYA,EACZC,oBAAqBA,EACrBrF,YAAauJ,EACb/D,OAAQO,EACRL,OAAQ2E,IAId,QACE,MAAM,IAAIK,MAAM,yBC9EFC,QACW,cAA7B1U,OAAO2U,SAASC,UAEe,UAA7B5U,OAAO2U,SAASC,UAEhB5U,OAAO2U,SAASC,SAASC,MACvB,2DCRN7U,OAAOC,GAAG,UAAW,gBACrBD,OAAOC,GAAG,UAAW,uBAErB6U,IAASC,OAAO7U,EAAAC,EAAAC,cAAC4U,GAAD,MAASC,SAASC,eAAe,SDoH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM1J,KAAK,SAAA2J,GACjCA,EAAaC","file":"static/js/main.8bda4d1d.chunk.js","sourcesContent":["import React, { useCallback } from 'react';\nimport styled from '@emotion/styled';\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  border-radius: 8px;\n  padding: 8px;\n  border: 2px solid currentColor;\n  background-color: rgba(255, 255, 255, 0.12);\n  color: #ff9753;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.22);\n  }\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.2);\n    outline: 0;\n  }\n`;\n\nfunction MessageInput(props) {\n  const { value } = props;\n\n  const handleBlur = useCallback(() => {\n    window.ga('set', 'dimension1', value); // message\n  }, [value]);\n\n  return <TextArea {...props} onBlur={handleBlur} />;\n}\n\nexport default MessageInput;\n","import React from 'react';\n\n// https://github.com/facebook/react/issues/1798#issuecomment-417047897\nfunction Checkbox({ isIndeterminate = false, ...props }) {\n  const setCheckboxRef = checkbox => {\n    if (checkbox) {\n      checkbox.indeterminate = isIndeterminate;\n    }\n  };\n\n  return <input type=\"checkbox\" ref={setCheckboxRef} {...props} />;\n}\n\nCheckbox.defaultProps = {\n  isIndeterminate: false,\n};\n\nexport default Checkbox;\n","import React, { useMemo, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport Checkbox from './Checkbox';\n\nconst Container = styled.div`\n  li {\n    display: inline-block;\n  }\n\n  label {\n    min-width: 105px;\n    padding-right: 1em;\n  }\n\n  input {\n    margin-right: 0.5em;\n  }\n`;\n\nconst CheckboxList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst PositionCheckboxList = styled(CheckboxList)`\n  background: rgba(0, 0, 0, 0.2);\n  padding: 16px 24px;\n  border-radius: 8px;\n`;\n\nconst Section = styled.section`\n  margin: 40px 0;\n  header {\n    font-size: 20px;\n    border-bottom: 2px dotted rgba(255, 255, 255, 0.12);\n    label {\n      padding: 8px 0;\n    }\n  }\n`;\n\n/**\n * Section of all legislators and controls\n *\n * @param {Object[]} props.legislator\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorsMap - id to true map\n * @param {function} props.onSelectionChange\n */\nfunction LegislatorSections({\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorsMap = {},\n  onSelectionChange = () => {},\n}) {\n  const legislatorsByArea = useMemo(\n    () =>\n      legislators.reduce((areas, legislator) => {\n        areas[legislator.area] = areas[legislator.area] || [];\n        areas[legislator.area].push(legislator);\n        return areas;\n      }, {}),\n    [legislators]\n  );\n\n  const selectedIdMap = useMemo(\n    () =>\n      selectedLegislatorIds.reduce((agg, id) => {\n        agg[id] = true;\n        return agg;\n      }, {}),\n    [selectedLegislatorIds]\n  );\n\n  return (\n    <Container>\n      <PositionSelector\n        legislators={legislators}\n        selectedIdMap={selectedIdMap}\n        onChange={onSelectionChange}\n      />\n      {Object.keys(legislatorsByArea).map(area => (\n        <LegislatorSection\n          key={area}\n          area={area}\n          selectedIdMap={selectedIdMap}\n          legislators={legislatorsByArea[area]}\n          onChange={onSelectionChange}\n        />\n      ))}\n    </Container>\n  );\n}\n\nfunction PositionSelector({ legislators, selectedIdMap, onChange = () => {} }) {\n  // position to total map\n  const positionTotalMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        agg[position] += 1;\n\n        return agg;\n      }, {}),\n    [legislators]\n  );\n\n  // position to count map\n  const positionCountMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        if (selectedIdMap[id]) {\n          agg[position] += 1;\n        }\n        return agg;\n      }, {}),\n    [legislators, selectedIdMap]\n  );\n\n  const handleToggle = useCallback(\n    e => {\n      const toggledPosition = e.target.value;\n\n      if (positionCountMap[toggledPosition] === 0) {\n        // select all in platform\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position === toggledPosition || selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      } else {\n        // deselect all\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position !== toggledPosition && selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      }\n    },\n    [positionCountMap, legislators, onChange, selectedIdMap]\n  );\n\n  return (\n    <PositionCheckboxList>\n      {Object.keys(positionTotalMap).map(p => (\n        <li key={p}>\n          <label>\n            <Checkbox\n              value={p}\n              onChange={handleToggle}\n              checked={positionCountMap[p] === positionTotalMap[p]}\n              isIndeterminate={\n                0 < positionCountMap[p] &&\n                positionCountMap[p] < positionTotalMap[p]\n              }\n            />{' '}\n            {p}\n          </label>\n        </li>\n      ))}\n    </PositionCheckboxList>\n  );\n}\n\n/**\n * Legislator control of one section area\n *\n * @param {string} props.area - Legislator section area\n * @param {object[]} props.legislators - legislators of this section\n * @param {object} props.selectedIdMap\n * @param {function} props.onChange\n */\nfunction LegislatorSection({\n  area = '',\n  legislators = [],\n  selectedIdMap = {},\n  onChange = () => {},\n}) {\n  const selectedCount = legislators.filter(({ id }) => selectedIdMap[id])\n    .length;\n\n  const handleSectionToggle = useCallback(\n    e => {\n      if (selectedCount === 0) {\n        // Select all\n        onChange(legislators.map(({ id }) => id));\n      } else {\n        const legislatorMap = legislators.reduce((agg, { id }) => {\n          agg[id] = true;\n          return agg;\n        }, {});\n        // deselect all in legislators\n        onChange(Object.keys(selectedIdMap).filter(id => !legislatorMap[id]));\n      }\n    },\n    [legislators, onChange, selectedCount]\n  );\n\n  const handleSingleToggle = useCallback(\n    e => {\n      const selectedId = e.target.value;\n\n      if (selectedIdMap[selectedId]) {\n        // Deselect this\n        onChange(Object.keys(selectedIdMap).filter(id => id !== selectedId));\n      } else {\n        // Select this\n        onChange(Object.keys(selectedIdMap).concat(selectedId));\n      }\n    },\n    [legislators, selectedIdMap, onChange]\n  );\n\n  return (\n    <Section>\n      <header>\n        <label>\n          <Checkbox\n            onChange={handleSectionToggle}\n            isIndeterminate={\n              0 < selectedCount && selectedCount < legislators.length\n            }\n            checked={selectedCount === legislators.length}\n          />{' '}\n          {area}\n        </label>\n      </header>\n      <CheckboxList>\n        {legislators.map(({ id, name }) => (\n          <li key={id}>\n            <label>\n              <Checkbox\n                key={id}\n                value={id}\n                onChange={handleSingleToggle}\n                checked={!!selectedIdMap[id]}\n              />{' '}\n              {name}\n            </label>\n          </li>\n        ))}\n      </CheckboxList>\n    </Section>\n  );\n}\n\nexport default LegislatorSections;\n","import React, { useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/core';\n\nconst DURATION = 1; // seconds\n\nfunction SpinningIcon({ icons = [], ...props }) {\n  const [idx, setIdx] = useState(0);\n  const iconCount = icons.length;\n\n  useEffect(() => {\n    const handle = setTimeout(() => {\n      setIdx((idx + 1) % iconCount);\n    }, DURATION * 1000);\n\n    return () => clearTimeout(handle);\n  }, [idx, iconCount]);\n\n  return (\n    <span\n      key={idx}\n      /* Change key to force trigger the 1-time animation */\n      role=\"img\"\n      aria-label=\"Icon\"\n      {...props}\n    >\n      {icons[idx]}\n    </span>\n  );\n}\n\nconst flip = keyframes`\n  from {\n    transform: perspective(400px) rotateY(90deg);\n  }\n\n  to {\n    transform: perspective(400px) rotateY(-90deg);\n  }\n`;\n\nexport default styled(SpinningIcon)`\n  /*\n    Can't use emojis that is too large on mobile:\n    https://stackoverflow.com/questions/29142118/why-do-emoji-not-render-above-a-certain-size-in-chrome\n  */\n  font-size: 60px;\n  line-height: 1;\n  display: inline-block;\n  transform: perspective(400px) rotateY(90deg);\n  animation: ${flip} 1s cubic-bezier(0, 0.37, 1, 0.63); /* no infinite here, use DOM change to trigger animation */\n\n  @media screen and (min-width: 1024px) {\n    font-size: 84px;\n  }\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction Divider({ content = 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', ...props }) {\n  return (\n    <p {...props}>\n      <span role=\"img\" aria-label=\"Horizontal ruler\">\n        {content}\n      </span>\n    </p>\n  );\n}\n\nexport default styled(Divider)`\n  margin: 40px 0;\n  text-align: center;\n  letter-spacing: 0.5em;\n`;\n","import 'intersection-observer'; // polyfill\nimport { useRef, useLayoutEffect } from 'react';\n\nfunction useIntersectionObserver(elem = null, onView = () => {}) {\n  const io = useRef(null);\n\n  useLayoutEffect(() => {\n    if (io.current) {\n      io.current.disconnect();\n    }\n    if (elem) {\n      io.current = new IntersectionObserver(onView, {});\n      io.current.observe(elem);\n    }\n    return () => {\n      if (io.current) {\n        io.current.disconnect();\n      }\n    };\n  }, [elem, onView]);\n}\n\nexport default useIntersectionObserver;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst SECONDS_EACH_LEGISLATOR = 20;\n\nconst BreakOnSmallScreen = styled.br`\n  @media screen and (min-width: 425px) {\n    display: none;\n  }\n`;\n\n/**\n * Start sending button on settings page\n *\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorsMap - id to true map\n * @param {function} props.onClick\n * @param {boolean} props.show - whether to show this button\n */\nfunction StartButton({\n  doneLegislatorsMap,\n  selectedLegislatorIds,\n  onClick,\n  show = false,\n  className,\n}) {\n  const hasStarted = Object.keys(doneLegislatorsMap).length > 0;\n  const legislatorToSendCount = selectedLegislatorIds.filter(\n    id => !doneLegislatorsMap[id]\n  ).length;\n\n  const totalSeconds = SECONDS_EACH_LEGISLATOR * legislatorToSendCount;\n  const timeStr =\n    totalSeconds > 120\n      ? ` ${Math.floor(totalSeconds / 60)} åˆ†é˜`\n      : ` ${totalSeconds} ç§’`;\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`${className} ${\n        show && legislatorToSendCount > 0 ? 'show' : ''\n      }`}\n      ga-on=\"click\"\n      ga-event-category=\"send\"\n      ga-event-action=\"start\"\n      ga-event-label={hasStarted ? 'ç¹¼çºŒ' : 'é–‹å§‹'}\n      ga-event-value={legislatorToSendCount}\n    >\n      <span>\n        {hasStarted ? 'ç¹¼çºŒ' : 'é–‹å§‹'}å‘ {legislatorToSendCount} ä½å§”å“¡é™³æƒ…{' '}\n        <BreakOnSmallScreen />\n        <small> (ç´„éœ€ {timeStr}) </small>\n      </span>\n    </button>\n  );\n}\n\nexport default styled(StartButton)`\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 24px;\n\n  transform: translate(0, 100%);\n  transition: transform 0.2s ease-out, background-color 0.2s;\n\n  font-size: 20px;\n  font-weight: bold;\n  border-radius: 0;\n\n  & > span {\n    margin: 0 auto;\n  }\n\n  &::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n\n  &.show {\n    transform: translate(0, 0);\n  }\n`;\n","import React, { useRef, useCallback, useState } from 'react';\nimport styled from '@emotion/styled';\n\nimport MessageInput from './components/MessageInput';\nimport LegislatorSections from './components/LegislatorSections';\nimport SpinningIcon from './components/SpinningIcon';\nimport Divider from './components/Divider';\n\nimport useIntersectionObserver from './lib/useIntersectionObserver';\nimport StartButton from './components/StartButton';\n\nconst PageContainer = styled.div`\n  padding: 40px;\n  max-width: 720px;\n  margin: 0 auto;\n`;\n\nconst Jumbotron = styled.header`\n  text-align: center;\n  padding: 30px 0;\n\n  h1 {\n    font-size: 28px;\n    font-weight: normal;\n    letter-spacing: 0.125em;\n    margin: 24px 0 16px;\n    @media screen and (min-width: 425px) {\n      font-size: 40px;\n    }\n  }\n\n  h2 {\n    margin: 0;\n    font-size: 14px;\n    letter-spacing: 0.5em;\n    font-weight: 200;\n  }\n`;\n\nconst Emphasis = styled.em`\n  color: #8f53ff;\n  font-style: normal;\n`;\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  padding-bottom: 64px;\n`;\n\nfunction SettingsPage({\n  msg = '',\n  onMsgChange = () => {},\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorsMap = {},\n  onSelectionChange = () => {},\n  onSubmit = () => {},\n}) {\n  const selectionSectionRef = useRef(null);\n  const [isSelectionInView, setSelectionInView] = useState(false);\n\n  const handleNextClick = useCallback(\n    () =>\n      selectionSectionRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      }),\n    [selectionSectionRef]\n  );\n\n  const handleSelectionIntersect = useCallback(entries => {\n    if (entries[0].isIntersecting) {\n      setSelectionInView(true);\n    } else {\n      setSelectionInView(false);\n    }\n  });\n\n  useIntersectionObserver(\n    selectionSectionRef.current,\n    handleSelectionIntersect\n  );\n\n  return (\n    <PageContainer>\n      <Jumbotron>\n        <SpinningIcon icons={['ğŸ ', 'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦', 'ğŸ ', 'ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', 'ğŸ ', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦']} />\n        <h1>\n          æˆ‘<Emphasis>æ„›å®¶</Emphasis>ãƒ»æˆ‘è¯çµ¡\n        </h1>\n        <h2>å¹³æ¬Šç«‹é™¢éµç›¤é™³æƒ…</h2>\n      </Jumbotron>\n\n      <section>\n        <p>\n          è®“åŒå¿—èƒ½ä»¥<Emphasis>å©šå§»</Emphasis>æˆå®¶ï¼Œå°±æ˜¯ã€Œæ„›å®¶ã€çš„è¡¨ç¾ã€‚\n          åœ¨å¹³æ¬Šæ³•æ¡ˆé€šéä¹‹å‰ï¼Œè®“æˆ‘å€‘å‹•å‹•æ‰‹æŒ‡é ­ï¼Œä¸åˆ†ç•°åŒåœ°å‘ç«‹æ³•å§”å“¡å€‘è¡¨é”æˆ‘å€‘\n          <Emphasis>å¸Œæœ›è®“åŒå¿—å¯ä»¥çµå©š</Emphasis>çš„å¿ƒè²å§ï¼\n        </p>\n        <Divider />\n        <label>\n          <h3>ä½ æƒ³è¦è·Ÿå§”å“¡å€‘èªªä»€éº¼å‘¢ï¼Ÿ</h3>\n          <MessageInput\n            value={msg}\n            onChange={e => onMsgChange(e.target.value)}\n            rows={5}\n            autoFocus\n          />\n        </label>\n        <button type=\"button\" onClick={handleNextClick}>\n          ä¸‹ä¸€æ­¥\n        </button>\n      </section>\n\n      <section ref={selectionSectionRef}>\n        <Divider />\n        <h3>è«‹é¸æ“‡è¦é™³æƒ…çš„ç«‹å§”</h3>\n        <p>\n          <button\n            type=\"button\"\n            onClick={() => onSelectionChange(legislators.map(({ id }) => id))}\n          >\n            æˆ‘å…¨éƒ¨éƒ½è¦ï¼\n          </button>\n        </p>\n        <LegislatorSections\n          legislators={legislators || []}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorsMap={doneLegislatorsMap}\n          onSelectionChange={onSelectionChange}\n        />\n        <StartButton\n          show={isSelectionInView}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorsMap={doneLegislatorsMap}\n          onClick={onSubmit}\n        />\n      </section>\n      <Footer>\n        <Divider content=\"ğŸ³ï¸â€ğŸŒˆ\" />\n\n        <p>\n          æ­¤å·¥å…·ç‚º\n          <a href=\"https://www.facebook.com/groups/answerfamily/\">\n            ã€Šæˆ‘æ„›å®¶æˆ‘è§£æƒ‘ - å¹³æ¬Šç¤¾æœƒå°è©±å·¥ç¨‹ã€‹ç¤¾ç¾¤\n          </a>\n          åƒèˆ‡è€…æä¾›ä¹‹\n          <a href=\"https://github.com/answerfamily/ly\">é–‹æ”¾åŸå§‹ç¢¼</a>å°ˆæ¡ˆã€‚\n        </p>\n\n        <p>\n          Background icons:{' '}\n          <a\n            href=\"https://thenounproject.com/nookfulloption/collection/space2\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Space2\n          </a>{' '}\n          by Nook Fulloption from the Noun Project\n        </p>\n      </Footer>\n    </PageContainer>\n  );\n}\n\nexport default SettingsPage;\n","const fbPromise = (window.FB\n  ? Promise.resolve(window.FB)\n  : new Promise(resolve => {\n      window.fbAsyncInit = () => {\n        resolve();\n      };\n    })\n).then(() => {\n  window.FB.init({\n    appId: process.env.REACT_APP_FB_ID,\n    version: 'v3.2',\n  });\n});\n\nexport default fbPromise;\n","import React, { useLayoutEffect, useRef } from 'react';\n\nimport waitForFB from 'lib/waitForFB';\n\nconst DEFAULT_TABS = ['messages', 'timeline'];\n\nfunction FacebookPagePlugin({\n  className = '',\n  tabs = DEFAULT_TABS,\n  href = '',\n  width = 320,\n  height = 500,\n  onParsed = null, // callback on layout being parsed\n}) {\n  const fbRoot = useRef(null);\n\n  useLayoutEffect(() => {\n    waitForFB.then(() => {\n      window.FB.XFBML.parse(fbRoot.current, () => {\n        if (onParsed) {\n          onParsed({ width, height });\n        }\n      });\n    });\n  }, [tabs, href, width, height]);\n\n  return (\n    <div ref={fbRoot} className={className}>\n      <div\n        className=\"fb-page\"\n        data-href={href}\n        data-tabs={tabs.join(',')}\n        data-small-header=\"true\"\n        data-adapt-container-width=\"false\"\n        data-show-facepile=\"false\"\n        data-hide-cta=\"true\"\n        data-width={width}\n        data-height={height}\n      />\n    </div>\n  );\n}\n\nexport default React.memo(FacebookPagePlugin);\n","import React, { useRef, useCallback, useState, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport cogoToast from 'cogo-toast';\nimport ClipboardJS from 'clipboard';\n\nimport MessageInput from 'components/MessageInput';\nimport Divider from 'components/Divider';\nimport FacebookPagePlugin from 'components/FacebookPagePlugin';\nimport SpinningIcon from './components/SpinningIcon';\n\nconst Header = styled.header`\n  position: fixed;\n  background: rgba(0, 0, 0, 0.88);\n  -webkit-backdrop-filter: blur(16px);\n\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  display: flex;\n  align-items: center;\n\n  span {\n    margin: 0 auto;\n  }\n`;\n\nconst HeaderProgress = styled.div`\n  position: absolute;\n  z-index: -1;\n  background: #7ed321;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 0;\n\n  transition: width 0.75s ease-out;\n`;\n\nconst Back = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding-left: 16px;\n  opacity: 0.5;\n  transition: opacity 0.2s;\n\n  cursor: pointer;\n  font-size: 14px;\n\n  &::before {\n    content: '';\n    width: 8px;\n    height: 8px;\n    margin-right: 8px;\n    border-top: 1px solid #fff;\n    border-left: 1px solid #fff;\n    transform: rotate(-45deg);\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst Container = styled.div`\n  padding: 60px 20px 20px;\n  min-height: 100vh;\n\n  section {\n    display: flex;\n    flex-flow: column;\n  }\n\n  @media screen and (min-width: 1024px) {\n    display: flex;\n    max-width: 1280px;\n    height: 100vh;\n    padding: 60px 40px 40px;\n    margin: 0 auto;\n\n    section {\n      flex: 3;\n      padding-left: 24px;\n      &:first-of-type {\n        flex: 2;\n        padding-left: 0;\n      }\n    }\n  }\n`;\n\nconst Button = styled.button`\n  width: 100%;\n  font-size: 28px;\n`;\n\nconst BorderedButton = styled(Button)`\n  padding: 8px 0;\n  border: 2px solid #ff5368;\n  background: transparent;\n  color: #ff5368;\n\n  &:hover {\n    color: #fff;\n  }\n`;\n\nconst NextButton = styled(Button, {\n  shouldForwardProp() {\n    return true;\n  },\n})`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &::after {\n    margin-left: 16px;\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n`;\n\nconst LegislatorData = styled.article`\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n\n  /* hiding scrollbar */\n  padding-right: 20px;\n  margin-right: -20px;\n\n  /* gradient appear & disappear */\n  mask-image: linear-gradient(\n    to bottom,\n    transparent,\n    black 6%,\n    black 94%,\n    transparent\n  );\n`;\n\nconst PluginWrapper = styled.div`\n  position: relative; /* for AutoSizer */\n  flex: 1 1 60vh;\n\n  border: 2px solid #ff9753;\n  border-bottom: 0;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  overflow: hidden;\n\n  .preload-iframe {\n    position: absolute;\n    opacity: 0;\n    top: 0;\n    left: 0;\n    z-index: -1;\n  }\n\n  @media screen and (min-width: 1024px) {\n    flex-basis: auto;\n  }\n`;\n\nconst Hint = styled.div`\n  display: flex;\n  background: #ff9753;\n  padding: 4px;\n  border-top: 0;\n  border-bottom-right-radius: 8px;\n  border-bottom-left-radius: 8px;\n  font-size: 14px;\n\n  span {\n    margin: 0 1em 0 auto;\n  }\n`;\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  opacity: 0.88;\n`;\n\nfunction SendPage({\n  msg = '',\n  currentIdx = 0 /* -1 when done */,\n  selectedLegislators = [],\n\n  onMsgChange = () => {},\n  onPrev = () => {},\n  onNext = () => {},\n  onBack = () => {},\n}) {\n  const copyBtnRef = useRef(null);\n  const submitStepRef = useRef(null);\n\n  // Set after plugin is parsed.\n  // This fixes the height of plugin on mobile so that window height change caused by browser footer\n  // or keyboard would not affect the component height after it's loaded.\n  //\n  // In the mean time, it does not affect desktop because desktop's height is determined\n  // by row flexbox.\n  //\n  const [pluginHeight, setPluginHeight] = useState(null);\n\n  const handleNext = useCallback(() => {\n    submitStepRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n    onNext();\n  }, [submitStepRef, onNext]);\n\n  useEffect(() => {\n    // Copy button clipboard.js setup\n    const clipboard = new ClipboardJS(copyBtnRef.current, { text: () => msg });\n    clipboard.on('success', () => {\n      cogoToast.success(`ã€Œ${msg.slice(0, 10)}â‹¯â‹¯ã€å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿`, {\n        position: 'bottom-center',\n      });\n      submitStepRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    });\n    return () => {\n      clipboard.destroy();\n    };\n  }, [copyBtnRef, submitStepRef, msg]);\n\n  if (currentIdx === -1) {\n    // Show finish screen\n    return (\n      <Container\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          flexFlow: 'column',\n        }}\n      >\n        <SpinningIcon icons={['ğŸ³ï¸â€ğŸŒˆ', 'ğŸ™‡â€â™€ï¸', 'ğŸ™‡â€â™‚ï¸']} />\n        <p>å®Œæˆå›‰ï¼è¬è¬æ‚¨ m(_ _)m</p>\n        <p>\n          <BorderedButton\n            style={{ padding: 16, fontSize: 16 }}\n            onClick={onBack}\n          >\n            å›é¦–é \n          </BorderedButton>\n        </p>\n      </Container>\n    );\n  }\n\n  // Data not loaded yet\n  if (!selectedLegislators || !selectedLegislators[currentIdx]) {\n    return null;\n  }\n\n  const {\n    name,\n    pridewatchpage,\n    position,\n    description,\n    party,\n    area,\n    religion,\n    subarea,\n    facebookpage,\n  } = selectedLegislators[currentIdx];\n\n  return (\n    <>\n      <Header>\n        <Back onClick={onBack}>è¨­å®šç«‹å§”</Back>\n        <span>\n          {currentIdx + 1} / {selectedLegislators.length}\n        </span>\n        <HeaderProgress\n          style={{\n            width: `${(\n              (100 * (currentIdx + 1)) /\n              selectedLegislators.length\n            ).toFixed(2)}%`,\n          }}\n        />\n      </Header>\n      <Container>\n        <section\n          style={{\n            /* hiding scrollbar of LegislatorData */\n            overflowX: 'hidden',\n          }}\n        >\n          <h1>{name}</h1>\n          <LegislatorData>\n            <p>{position}</p>\n            {description && (\n              <ul style={{ padding: 0 }}>\n                {description.split('\\n').map((desc, idx) => (\n                  <li key={idx}>{desc}</li>\n                ))}\n              </ul>\n            )}\n            <p>\n              {party}ãƒ»{area}\n              {subarea ? `ï¼${subarea}` : null}\n            </p>\n            {religion ? <p>{religion}</p> : null}\n            <p>\n              <a\n                href={pridewatchpage}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                PrideWatch é é¢\n              </a>\n            </p>\n          </LegislatorData>\n          <Footer>\n            <Divider />\n            <p>\n              è³‡æ–™ä¾†æºï¼š\n              <a\n                href=\"https://www.pridewatch.tw/beta/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                PrideWatch Taiwan åŒå¿—äººæ¬Šç«‹å ´è§€æ¸¬ç«™\n              </a>\n              ã€\n              <a\n                href=\"http://equallove.tw/articles/200\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                å©šå§»å¹³æ¬Šå¤§å¹³å°å§”å“¡ FB åå†Š\n              </a>\n            </p>\n          </Footer>\n        </section>\n        <section>\n          <h1>1. è¤‡è£½æ–‡å­—</h1>\n          <MessageInput\n            style={{ flex: 1 }}\n            placeholder=\"æŠŠé™³æƒ…æ–‡å­—è²¼åœ¨é€™è£¡ï¼Œæ–¹ä¾¿è¤‡è£½è²¼ä¸Š\"\n            onChange={e => onMsgChange(e.target.value)}\n            value={msg}\n            rows={5}\n          />\n          <p>\n            <BorderedButton ref={copyBtnRef}>è¤‡è£½</BorderedButton>\n          </p>\n        </section>\n        <section ref={submitStepRef}>\n          <h1>2. è²¼ä¸Šä¸¦é€å‡º</h1>\n          <PluginWrapper\n            style={\n              pluginHeight\n                ? {\n                    height: pluginHeight,\n                    flexBasis: 'auto',\n                  } /* fix height of PluginWrapper */\n                : {}\n            }\n          >\n            <AutoSizer>\n              {({ width, height }) => [\n                <FacebookPagePlugin\n                  key={currentIdx}\n                  href={facebookpage}\n                  width={width - 4 /* left/right border width */}\n                  height={height - 2 /* top border width */}\n                  onParsed={({ height }) =>\n                    setPluginHeight(height + 2 /* top border width */)\n                  }\n                />,\n                selectedLegislators[currentIdx + 1] && (\n                  <FacebookPagePlugin\n                    className=\"preload-iframe\"\n                    key={currentIdx + 1}\n                    href={selectedLegislators[currentIdx + 1].facebookpage}\n                    width={width - 4 /* left/right border width */}\n                    height={height - 2 /* top border width */}\n                  />\n                ),\n              ]}\n            </AutoSizer>\n          </PluginWrapper>\n          <Hint>\n            ï¼Š è¨˜å¾—è¦æŒ‰ã€Œç™¼é€ã€æ‰æœƒé€å‡ºå”·ï¼\n            <span>â†‘â†‘</span>\n          </Hint>\n          <p>\n            <NextButton\n              ga-on=\"click\"\n              ga-event-category=\"send\"\n              ga-event-action=\"submit\"\n              ga-event-label={name}\n              onClick={handleNext}\n            >\n              ä¸‹ä¸€ä½\n            </NextButton>\n          </p>\n        </section>\n      </Container>\n    </>\n  );\n}\n\nexport default SendPage;\n","import { useState, useEffect, useMemo } from 'react';\n\n// shared storage of legislators\nlet legislatorData = null;\n\n/**\n * @returns {[object[], object]} legislators & legislatorMap (id to legislator)\n */\nfunction useLegislatorData() {\n  const [legislators, setLegislators] = useState(legislatorData);\n\n  useEffect(() => {\n    if (legislators) return;\n\n    import('data/legislators.json').then(data =>\n      setLegislators(\n        (legislatorData = /* filter out legislators that has no PrideWatch data */ data.default.rows.filter(\n          ({ area }) => !!area\n        ))\n      )\n    );\n  });\n\n  return [\n    legislators,\n    useMemo(\n      () =>\n        (legislators || []).reduce((agg, legislator) => {\n          agg[legislator.id] = legislator;\n          return agg;\n        }, {}),\n      [legislators]\n    ),\n  ];\n}\n\nexport default useLegislatorData;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport SettingsPage from './SettingsPage';\nimport SendPage from './SendPage';\nimport useLegislatorData from 'lib/useLegislatorData';\n\nconst DEFAULT_MESSAGE =\n  'æˆ‘æ˜¯ï¼¸ï¼¸å€çš„é¸æ°‘ï¼Œè«‹å§”å“¡æ”¯æŒç”¨åˆæ†²çš„æ³•å¾‹ï¼Œè®“åŒå¿—å¯ä»¥çµå©šã€‚';\n\nconst POSITION_ORDER = {\n  æ”¯æŒåŒå©š: 1,\n  æ”¯æŒå°ˆæ³•: 2,\n  åå°åŒå©š: 3,\n  æœªè¡¨æ…‹: 4,\n};\n\nfunction App() {\n  const [legislators, legislatorMap] = useLegislatorData();\n  const [page, setPage] = useState('settings'); // current page. enum: 'settings', 'send'\n  const [msg, setMsg] = useState(DEFAULT_MESSAGE); // message template\n  const [selectedLegislatorIds, setLegislatorIds] = useState([]); // list of selected legislator ID, with done legislators always in front.\n  const [doneLegislatorMap, setLegislatorDone] = useState({}); // {[done legislator ID]: true, ...}\n\n  const selectedLegislators = useMemo(\n    () => selectedLegislatorIds.map(id => legislatorMap[id]),\n    [selectedLegislatorIds, legislatorMap]\n  );\n  const currentIdx = useMemo(\n    () => selectedLegislatorIds.findIndex(id => !doneLegislatorMap[id]),\n    [selectedLegislatorIds, doneLegislatorMap]\n  );\n\n  const handleSelectionChange = useCallback(\n    selectedLegislatorIds => {\n      setLegislatorIds(\n        selectedLegislatorIds.sort((aId, bId) => {\n          // First, put done legislators in front\n          if (doneLegislatorMap[aId] && !doneLegislatorMap[bId]) return -1;\n          if (!doneLegislatorMap[aId] && doneLegislatorMap[bId]) return 1;\n\n          // Then compare their positions\n          const aPos = POSITION_ORDER[legislatorMap[aId].position];\n          const bPos = POSITION_ORDER[legislatorMap[bId].position];\n          return aPos - bPos;\n        })\n      );\n    },\n    [setLegislatorIds, doneLegislatorMap, legislatorMap]\n  );\n\n  const handleSettingsSubmit = useCallback(() => setPage('send'), [setPage]);\n  const handleBackToSettings = useCallback(() => setPage('settings'), [\n    setPage,\n  ]);\n\n  const handleNext = useCallback(\n    () =>\n      setLegislatorDone({\n        ...doneLegislatorMap,\n        [selectedLegislators[currentIdx].id]: true,\n      }),\n    [doneLegislatorMap, selectedLegislators, currentIdx]\n  );\n\n  switch (page) {\n    case 'settings':\n      return (\n        <SettingsPage\n          msg={msg}\n          onMsgChange={setMsg}\n          legislators={legislators}\n          selectedLegislatorIds={selectedLegislatorIds}\n          onSelectionChange={handleSelectionChange}\n          doneLegislatorMap={doneLegislatorMap}\n          onSubmit={handleSettingsSubmit}\n        />\n      );\n\n    case 'send': {\n      return (\n        <SendPage\n          msg={msg}\n          currentIdx={currentIdx}\n          selectedLegislators={selectedLegislators}\n          onMsgChange={setMsg}\n          onNext={handleNext}\n          onBack={handleBackToSettings}\n        />\n      );\n    }\n    default:\n      throw new Error('Wrong page settings');\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'autotrack/lib/plugins/event-tracker';\nimport 'autotrack/lib/plugins/outbound-link-tracker';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nwindow.ga('require', 'eventTracker');\nwindow.ga('require', 'outboundLinkTracker');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}